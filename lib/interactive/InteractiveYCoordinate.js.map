{"version":3,"sources":["../../../src/lib/interactive/InteractiveYCoordinate.js"],"names":["InteractiveYCoordinate","props","handleDrag","bind","handleDragComplete","handleDelete","terminate","saveNodeType","getSelectionState","nodes","state","index","yValue","setState","override","moreProps","yCoordinateList","newAlertList","map","each","idx","selected","draggedAlert","onDragComplete","xyValue","current","start","end","onDelete","id","propTypes","onChoosePosition","func","isRequired","onSelect","defaultPriceCoordinate","shape","bgFill","string","bgOpacity","number","stroke","strokeDasharray","oneOf","strokeOpacity","strokeWidth","textFill","fontFamily","fontWeight","fontStyle","fontSize","text","textBox","height","left","padding","right","closeIcon","width","edge","fill","fillOpacity","hoverText","object","array","enabled","bool","defaultProps","orient","at","arrowWidth","dx","rectWidth","rectHeight","displayFormat","enable","bgHeight","bgWidth","contextTypes","subscribe","unsubscribe","generateSubscriptionId","chartId","oneOfType"],"mappings":"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","file":"InteractiveYCoordinate.js","sourcesContent":["\r\n\r\nimport React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { format } from \"d3-format\";\r\nimport { isDefined, noop, strokeDashTypes } from \"../utils\";\r\n\r\nimport {\r\n\tgetValueFromOverride,\r\n\tterminate,\r\n\tsaveNodeType,\r\n\tisHoverForInteractiveType,\r\n} from \"./utils\";\r\nimport EachInteractiveYCoordinate from \"./wrapper/EachInteractiveYCoordinate\";\r\nimport HoverTextNearMouse from \"./components/HoverTextNearMouse\";\r\n\r\nclass InteractiveYCoordinate extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.handleDrag = this.handleDrag.bind(this);\r\n\t\tthis.handleDragComplete = this.handleDragComplete.bind(this);\r\n\t\tthis.handleDelete = this.handleDelete.bind(this);\r\n\t\tthis.terminate = terminate.bind(this);\r\n\r\n\t\tthis.saveNodeType = saveNodeType.bind(this);\r\n\t\tthis.getSelectionState = isHoverForInteractiveType(\"yCoordinateList\")\r\n\t\t\t.bind(this);\r\n\r\n\t\tthis.nodes = [];\r\n\t\tthis.state = {};\r\n\t}\r\n\thandleDrag(index, yValue) {\r\n\t\tthis.setState({\r\n\t\t\toverride: {\r\n\t\t\t\tindex,\r\n\t\t\t\tyValue,\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\thandleDragComplete(moreProps) {\r\n\t\tconst { override } = this.state;\r\n\t\tif (isDefined(override)) {\r\n\t\t\tconst { yCoordinateList } = this.props;\r\n\t\t\tconst newAlertList = yCoordinateList\r\n\t\t\t\t.map((each, idx) => {\r\n\t\t\t\t\tconst selected = (idx === override.index);\r\n\t\t\t\t\treturn selected\r\n\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t...each,\r\n\t\t\t\t\t\t\tyValue: override.yValue,\r\n\t\t\t\t\t\t\tselected,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t: {\r\n\t\t\t\t\t\t\t...each,\r\n\t\t\t\t\t\t\tselected\r\n\t\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\tconst draggedAlert = newAlertList[override.index];\r\n\t\t\tthis.setState({\r\n\t\t\t\toverride: null,\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.props.onDragComplete(newAlertList, moreProps, draggedAlert);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\thandleDrawLine(xyValue) {\r\n\t\tconst { current } = this.state;\r\n\r\n\t\tif (isDefined(current) && isDefined(current.start)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tcurrent: {\r\n\t\t\t\t\tstart: current.start,\r\n\t\t\t\t\tend: xyValue,\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\thandleDelete(index, moreProps) {\r\n\t\tconst { onDelete, yCoordinateList } = this.props;\r\n\t\tonDelete(yCoordinateList[index], moreProps);\r\n\t}\r\n\trender() {\r\n\t\tconst { yCoordinateList } = this.props;\r\n\t\tconst { override } = this.state;\r\n\t\treturn (\r\n\t\t\t<g>\r\n\t\t\t\t{yCoordinateList.map((each, idx) => {\r\n\t\t\t\t\tconst props = each;\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<EachInteractiveYCoordinate key={each.id}\r\n\t\t\t\t\t\t\tref={this.saveNodeType(idx)}\r\n\t\t\t\t\t\t\tindex={idx}\r\n\t\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\t\tselected={each.selected}\r\n\t\t\t\t\t\t\tyValue={getValueFromOverride(override, idx, \"yValue\", each.yValue)}\r\n\r\n\t\t\t\t\t\t\tonDelete={this.handleDelete}\r\n\t\t\t\t\t\t\tonDrag={this.handleDrag}\r\n\t\t\t\t\t\t\tonDragComplete={this.handleDragComplete}\r\n\t\t\t\t\t\t\tedgeInteractiveCursor=\"react-stockcharts-move-cursor\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nInteractiveYCoordinate.propTypes = {\r\n\tonChoosePosition: PropTypes.func.isRequired,\r\n\tonDragComplete: PropTypes.func.isRequired,\r\n\tonSelect: PropTypes.func,\r\n\tonDelete: PropTypes.func,\r\n\r\n\tdefaultPriceCoordinate: PropTypes.shape({\r\n\t\tbgFill: PropTypes.string.isRequired,\r\n\t\tbgOpacity: PropTypes.number.isRequired,\r\n\r\n\t\tstroke: PropTypes.string.isRequired,\r\n\t\tstrokeDasharray: PropTypes.oneOf(strokeDashTypes).isRequired,\r\n\t\tstrokeOpacity: PropTypes.number.isRequired,\r\n\t\tstrokeWidth: PropTypes.number.isRequired,\r\n\r\n\t\ttextFill: PropTypes.string.isRequired,\r\n\t\tfontFamily: PropTypes.string.isRequired,\r\n\t\tfontWeight: PropTypes.string.isRequired,\r\n\t\tfontStyle: PropTypes.string.isRequired,\r\n\t\tfontSize: PropTypes.number.isRequired,\r\n\t\ttext: PropTypes.string.isRequired,\r\n\r\n\t\ttextBox: PropTypes.shape({\r\n\t\t\theight: PropTypes.number.isRequired,\r\n\t\t\tleft: PropTypes.number.isRequired,\r\n\t\t\tpadding: PropTypes.shape({\r\n\t\t\t\tleft: PropTypes.number.isRequired,\r\n\t\t\t\tright: PropTypes.number.isRequired,\r\n\t\t\t}),\r\n\t\t\tcloseIcon: PropTypes.shape({\r\n\t\t\t\tpadding: PropTypes.shape({\r\n\t\t\t\t\tleft: PropTypes.number.isRequired,\r\n\t\t\t\t\tright: PropTypes.number.isRequired,\r\n\t\t\t\t}),\r\n\t\t\t\twidth: PropTypes.number.isRequired,\r\n\t\t\t})\r\n\t\t}).isRequired,\r\n\t\tedge: PropTypes.shape({\r\n\t\t\tstroke: PropTypes.string.isRequired,\r\n\t\t\tstrokeOpacity: PropTypes.number.isRequired,\r\n\t\t\tstrokeWidth: PropTypes.number.isRequired,\r\n\r\n\t\t\tfill: PropTypes.string.isRequired,\r\n\t\t\tfillOpacity: PropTypes.number.isRequired,\r\n\t\t})\r\n\t}).isRequired,\r\n\r\n\thoverText: PropTypes.object.isRequired,\r\n\tyCoordinateList: PropTypes.array.isRequired,\r\n\tenabled: PropTypes.bool.isRequired,\r\n};\r\n\r\nInteractiveYCoordinate.defaultProps = {\r\n\tonChoosePosition: noop,\r\n\tonDragComplete: noop,\r\n\tonSelect: noop,\r\n\tonDelete: noop,\r\n\r\n\tdefaultPriceCoordinate: {\r\n\t\tbgFill: \"#FFFFFF\",\r\n\t\tbgOpacity: 1,\r\n\r\n\t\tstroke: \"#6574CD\",\r\n\t\tstrokeOpacity: 1,\r\n\t\tstrokeDasharray: \"ShortDash2\",\r\n\t\tstrokeWidth: 1,\r\n\r\n\t\ttextFill: \"#6574CD\",\r\n\t\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\r\n\t\tfontSize: 12,\r\n\t\tfontStyle: \"normal\",\r\n\t\tfontWeight: \"normal\",\r\n\t\ttext: \"Alert\",\r\n\t\ttextBox: {\r\n\t\t\theight: 24,\r\n\t\t\tleft: 20,\r\n\t\t\tpadding: { left: 10, right: 5 },\r\n\t\t\tcloseIcon: {\r\n\t\t\t\tpadding: { left: 5, right: 8 },\r\n\t\t\t\twidth: 8,\r\n\t\t\t}\r\n\t\t},\r\n\t\tedge: {\r\n\t\t\tstroke: \"#6574CD\",\r\n\t\t\tstrokeOpacity: 1,\r\n\t\t\tstrokeWidth: 1,\r\n\r\n\t\t\tfill: \"#FFFFFF\",\r\n\t\t\tfillOpacity: 1,\r\n\t\t\torient: \"right\",\r\n\t\t\tat: \"right\",\r\n\t\t\tarrowWidth: 10,\r\n\t\t\tdx: 0,\r\n\t\t\trectWidth: 50,\r\n\t\t\trectHeight: 20,\r\n\t\t\tdisplayFormat: format(\".2f\"),\r\n\t\t}\r\n\t},\r\n\thoverText: {\r\n\t\t...HoverTextNearMouse.defaultProps,\r\n\t\tenable: true,\r\n\t\tbgHeight: 18,\r\n\t\tbgWidth: 175,\r\n\t\ttext: \"Click and drag the edge circles\",\r\n\t},\r\n\tyCoordinateList: [],\r\n};\r\n\r\nInteractiveYCoordinate.contextTypes = {\r\n\tsubscribe: PropTypes.func.isRequired,\r\n\tunsubscribe: PropTypes.func.isRequired,\r\n\tgenerateSubscriptionId: PropTypes.func.isRequired,\r\n\tchartId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\r\n};\r\n\r\nexport default InteractiveYCoordinate;\r\n"]}