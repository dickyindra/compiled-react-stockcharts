{"version":3,"sources":["../../../../src/lib/interactive/wrapper/EachGannFan.js"],"names":["EachGannFan","props","handleLine1Edge1Drag","bind","handleLine1Edge2Drag","handleDragStart","handleFanDrag","handleChannelHeightChange","handleHover","getEdgeCircle","isHover","saveNodeType","nodes","state","hover","moreProps","hovering","setState","startXY","endXY","dy","dragStart","index","onDrag","xScale","yScale","chartConfig","xAccessor","fullData","startPos","mouseXY","x1","y1","x2","y2","dx","newX1Value","newY1Value","invert","newX2Value","newY2Value","newDy","xy","dragHandler","cursor","fill","edge","selected","appearance","edgeStroke","edgeStrokeWidth","r","onDragComplete","interactive","edgeFill","stroke","strokeWidth","strokeOpacity","fillOpacity","fontFamily","fontSize","fontFill","hoverText","hoverTextEnabled","enable","restHoverTextProps","hoverHandler","onHover","onUnHover","line1Edge","propTypes","arrayOf","number","isRequired","bool","shape","string","object","func","defaultProps","yDisplayFormat","d","toFixed","bgHeight","bgWidth","text"],"mappings":"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","file":"EachGannFan.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { isDefined, noop } from \"../../utils\";\r\nimport { getXValue } from \"../../utils/ChartDataUtil\";\r\nimport { saveNodeType, isHover } from \"../utils\";\r\n\r\nimport ClickableCircle from \"../components/ClickableCircle\";\r\nimport GannFan from \"../components/GannFan\";\r\nimport HoverTextNearMouse from \"../components/HoverTextNearMouse\";\r\n\r\nclass EachGannFan extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.handleLine1Edge1Drag = this.handleLine1Edge1Drag.bind(this);\r\n\t\tthis.handleLine1Edge2Drag = this.handleLine1Edge2Drag.bind(this);\r\n\r\n\t\tthis.handleDragStart = this.handleDragStart.bind(this);\r\n\t\tthis.handleFanDrag = this.handleFanDrag.bind(this);\r\n\r\n\t\tthis.handleChannelHeightChange = this.handleChannelHeightChange.bind(this);\r\n\r\n\t\tthis.handleHover = this.handleHover.bind(this);\r\n\t\tthis.getEdgeCircle = this.getEdgeCircle.bind(this);\r\n\r\n\t\tthis.isHover = isHover.bind(this);\r\n\t\tthis.saveNodeType = saveNodeType.bind(this);\r\n\t\tthis.nodes = {};\r\n\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t};\r\n\t}\r\n\thandleHover(moreProps) {\r\n\t\tif (this.state.hover !== moreProps.hovering) {\r\n\t\t\tthis.setState({\r\n\t\t\t\thover: moreProps.hovering\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\thandleDragStart() {\r\n\t\tconst {\r\n\t\t\tstartXY, endXY, dy,\r\n\t\t} = this.props;\r\n\r\n\t\tthis.dragStart = {\r\n\t\t\tstartXY, endXY, dy,\r\n\t\t};\r\n\t}\r\n\thandleFanDrag(moreProps) {\r\n\t\tconst { index, onDrag } = this.props;\r\n\r\n\t\tconst {\r\n\t\t\tstartXY, endXY,\r\n\t\t} = this.dragStart;\r\n\r\n\t\tconst { xScale, chartConfig: { yScale }, xAccessor, fullData } = moreProps;\r\n\t\tconst { startPos, mouseXY } = moreProps;\r\n\r\n\t\tconst x1 = xScale(startXY[0]);\r\n\t\tconst y1 = yScale(startXY[1]);\r\n\t\tconst x2 = xScale(endXY[0]);\r\n\t\tconst y2 = yScale(endXY[1]);\r\n\r\n\t\tconst dx = startPos[0] - mouseXY[0];\r\n\t\tconst dy = startPos[1] - mouseXY[1];\r\n\r\n\t\tconst newX1Value = getXValue(xScale, xAccessor, [x1 - dx, y1 - dy], fullData);\r\n\t\tconst newY1Value = yScale.invert(y1 - dy);\r\n\t\tconst newX2Value = getXValue(xScale, xAccessor, [x2 - dx, y2 - dy], fullData);\r\n\t\tconst newY2Value = yScale.invert(y2 - dy);\r\n\r\n\t\t// const newDy = newY2Value - endXY[1] + this.dragStart.dy;\r\n\r\n\t\tonDrag(index, {\r\n\t\t\tstartXY: [newX1Value, newY1Value],\r\n\t\t\tendXY: [newX2Value, newY2Value],\r\n\t\t\tdy: this.dragStart.dy,\r\n\t\t});\r\n\t}\r\n\thandleLine1Edge1Drag(moreProps) {\r\n\t\tconst { index, onDrag } = this.props;\r\n\t\tconst {\r\n\t\t\tstartXY,\r\n\t\t} = this.dragStart;\r\n\r\n\t\tconst {\r\n\t\t\tstartPos, mouseXY, xAccessor,\r\n\t\t\txScale, fullData,\r\n\t\t\tchartConfig: { yScale }\r\n\t\t} = moreProps;\r\n\r\n\t\tconst dx = startPos[0] - mouseXY[0];\r\n\t\tconst dy = startPos[1] - mouseXY[1];\r\n\r\n\t\tconst x1 = xScale(startXY[0]);\r\n\t\tconst y1 = yScale(startXY[1]);\r\n\r\n\t\tconst newX1Value = getXValue(xScale, xAccessor, [x1 - dx, y1 - dy], fullData);\r\n\t\tconst newY1Value = yScale.invert(y1 - dy);\r\n\r\n\t\tonDrag(index, {\r\n\t\t\tstartXY: [newX1Value, newY1Value],\r\n\t\t\tendXY: this.dragStart.endXY,\r\n\t\t\tdy: this.dragStart.dy,\r\n\t\t});\r\n\t}\r\n\thandleLine1Edge2Drag(moreProps) {\r\n\t\tconst { index, onDrag } = this.props;\r\n\t\tconst {\r\n\t\t\tendXY,\r\n\t\t} = this.dragStart;\r\n\r\n\t\tconst {\r\n\t\t\tstartPos, mouseXY, xAccessor,\r\n\t\t\txScale, fullData,\r\n\t\t\tchartConfig: { yScale }\r\n\t\t} = moreProps;\r\n\r\n\t\tconst dx = startPos[0] - mouseXY[0];\r\n\t\tconst dy = startPos[1] - mouseXY[1];\r\n\r\n\t\tconst x1 = xScale(endXY[0]);\r\n\t\tconst y1 = yScale(endXY[1]);\r\n\r\n\t\tconst newX1Value = getXValue(xScale, xAccessor, [x1 - dx, y1 - dy], fullData);\r\n\t\tconst newY1Value = yScale.invert(y1 - dy);\r\n\r\n\t\tonDrag(index, {\r\n\t\t\tstartXY: this.dragStart.startXY,\r\n\t\t\tendXY: [newX1Value, newY1Value],\r\n\t\t\tdy: this.dragStart.dy,\r\n\t\t});\r\n\t}\r\n\thandleChannelHeightChange(moreProps) {\r\n\t\tconst { index, onDrag } = this.props;\r\n\r\n\t\tconst {\r\n\t\t\tstartXY, endXY,\r\n\t\t} = this.dragStart;\r\n\r\n\t\tconst { chartConfig: { yScale } } = moreProps;\r\n\t\tconst { startPos, mouseXY } = moreProps;\r\n\r\n\t\tconst y2 = yScale(endXY[1]);\r\n\r\n\t\tconst dy = startPos[1] - mouseXY[1];\r\n\r\n\t\tconst newY2Value = yScale.invert(y2 - dy);\r\n\r\n\t\tconst newDy = newY2Value - endXY[1] + this.dragStart.dy;\r\n\r\n\t\tonDrag(index, {\r\n\t\t\tstartXY,\r\n\t\t\tendXY,\r\n\t\t\tdy: newDy,\r\n\t\t});\r\n\t}\r\n\tgetEdgeCircle({ xy, dragHandler, cursor, fill, edge }) {\r\n\t\tconst { hover } = this.state;\r\n\t\tconst { selected, appearance } = this.props;\r\n\t\tconst { edgeStroke, edgeStrokeWidth, r } = appearance;\r\n\t\tconst { onDragComplete } = this.props;\r\n\r\n\t\treturn <ClickableCircle\r\n\t\t\tref={this.saveNodeType(edge)}\r\n\t\t\tshow={selected || hover}\r\n\t\t\tcx={xy[0]}\r\n\t\t\tcy={xy[1]}\r\n\t\t\tr={r}\r\n\t\t\tfill={fill}\r\n\t\t\tstroke={edgeStroke}\r\n\t\t\tstrokeWidth={edgeStrokeWidth}\r\n\t\t\tinteractiveCursorClass={cursor}\r\n\r\n\t\t\tonDragStart={this.handleDragStart}\r\n\t\t\tonDrag={dragHandler}\r\n\t\t\tonDragComplete={onDragComplete} />;\r\n\t}\r\n\trender() {\r\n\t\tconst { startXY, endXY } = this.props;\r\n\t\tconst { interactive, appearance  } = this.props;\r\n\t\tconst {\r\n\t\t\tedgeFill,\r\n\t\t\tstroke, strokeWidth, strokeOpacity,\r\n\t\t\tfill, fillOpacity\r\n\t\t} = appearance;\r\n\t\tconst { fontFamily, fontSize, fontFill } = appearance;\r\n\t\tconst { hoverText, selected } = this.props;\r\n\t\tconst { onDragComplete } = this.props;\r\n\t\tconst { hover } = this.state;\r\n\t\tconst { enable: hoverTextEnabled, ...restHoverTextProps } = hoverText;\r\n\r\n\t\tconst hoverHandler = interactive\r\n\t\t\t? { onHover: this.handleHover, onUnHover: this.handleHover }\r\n\t\t\t: {};\r\n\r\n\t\tconst line1Edge = isDefined(startXY) && isDefined(endXY)\r\n\t\t\t? <g>\r\n\t\t\t\t{this.getEdgeCircle({\r\n\t\t\t\t\txy: startXY,\r\n\t\t\t\t\tdragHandler: this.handleLine1Edge1Drag,\r\n\t\t\t\t\tcursor: \"react-stockcharts-move-cursor\",\r\n\t\t\t\t\tfill: edgeFill,\r\n\t\t\t\t\tedge: \"edge1\"\r\n\t\t\t\t})}\r\n\t\t\t\t{this.getEdgeCircle({\r\n\t\t\t\t\txy: endXY,\r\n\t\t\t\t\tdragHandler: this.handleLine1Edge2Drag,\r\n\t\t\t\t\tcursor: \"react-stockcharts-move-cursor\",\r\n\t\t\t\t\tfill: edgeFill,\r\n\t\t\t\t\tedge: \"edge2\"\r\n\t\t\t\t})}\r\n\t\t\t</g>\r\n\t\t\t: null;\r\n\r\n\t\treturn (\r\n\t\t\t<g>\r\n\t\t\t\t<GannFan\r\n\t\t\t\t\tref={this.saveNodeType(\"fan\")}\r\n\t\t\t\t\tselected={hover || selected}\r\n\r\n\t\t\t\t\t{...hoverHandler}\r\n\r\n\t\t\t\t\tstartXY={startXY}\r\n\t\t\t\t\tendXY={endXY}\r\n\t\t\t\t\tstroke={stroke}\r\n\t\t\t\t\tstrokeWidth={(hover || selected) ? strokeWidth + 1 : strokeWidth}\r\n\t\t\t\t\tfill={fill}\r\n\t\t\t\t\tstrokeOpacity={strokeOpacity}\r\n\t\t\t\t\tfillOpacity={fillOpacity}\r\n\t\t\t\t\tfontFamily={fontFamily}\r\n\t\t\t\t\tfontSize={fontSize}\r\n\t\t\t\t\tfontFill={fontFill}\r\n\t\t\t\t\tinteractiveCursorClass=\"react-stockcharts-move-cursor\"\r\n\r\n\t\t\t\t\tonDragStart={this.handleDragStart}\r\n\t\t\t\t\tonDrag={this.handleFanDrag}\r\n\t\t\t\t\tonDragComplete={onDragComplete}\r\n\t\t\t\t/>\r\n\t\t\t\t{line1Edge}\r\n\t\t\t\t<HoverTextNearMouse\r\n\t\t\t\t\tshow={hoverTextEnabled && hover && !selected}\r\n\t\t\t\t\t{...restHoverTextProps} />\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nEachGannFan.propTypes = {\r\n\tstartXY: PropTypes.arrayOf(PropTypes.number).isRequired,\r\n\tendXY: PropTypes.arrayOf(PropTypes.number).isRequired,\r\n\tdy: PropTypes.number,\r\n\r\n\tinteractive: PropTypes.bool.isRequired,\r\n\tselected: PropTypes.bool.isRequired,\r\n\r\n\tappearance: PropTypes.shape({\r\n\t\tstroke: PropTypes.string.isRequired,\r\n\t\tstrokeOpacity: PropTypes.number.isRequired,\r\n\t\tfillOpacity: PropTypes.number.isRequired,\r\n\t\tstrokeWidth: PropTypes.number.isRequired,\r\n\t\tedgeStroke: PropTypes.string.isRequired,\r\n\t\tedgeFill: PropTypes.string.isRequired,\r\n\t\tedgeStrokeWidth: PropTypes.number.isRequired,\r\n\t\tr: PropTypes.number.isRequired,\r\n\t\tfill: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n\t\tfontFamily: PropTypes.string.isRequired,\r\n\t\tfontSize: PropTypes.number.isRequired,\r\n\t\tfontFill: PropTypes.string.isRequired,\r\n\t}).isRequired,\r\n\thoverText: PropTypes.object.isRequired,\r\n\r\n\tindex: PropTypes.number,\r\n\tonDrag: PropTypes.func.isRequired,\r\n\tonDragComplete: PropTypes.func.isRequired,\r\n};\r\n\r\nEachGannFan.defaultProps = {\r\n\tyDisplayFormat: d => d.toFixed(2),\r\n\tinteractive: true,\r\n\tselected: false,\r\n\r\n\tappearance: {\r\n\t\tstroke: \"#000000\",\r\n\t\tfillOpacity: 0.2,\r\n\t\tstrokeOpacity: 1,\r\n\t\tstrokeWidth: 1,\r\n\t\tedgeStroke: \"#000000\",\r\n\t\tedgeFill: \"#FFFFFF\",\r\n\t\tedgeStrokeWidth: 1,\r\n\t\tr: 5,\r\n\t\tfill: [\r\n\t\t\t\"#1f77b4\",\r\n\t\t\t\"#ff7f0e\",\r\n\t\t\t\"#2ca02c\",\r\n\t\t\t\"#d62728\",\r\n\t\t\t\"#9467bd\",\r\n\t\t\t\"#8c564b\",\r\n\t\t\t\"#e377c2\",\r\n\t\t\t\"#7f7f7f\",\r\n\t\t],\r\n\t\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\r\n\t\tfontSize: 10,\r\n\t\tfontFill: \"#000000\",\r\n\t},\r\n\r\n\tonDrag: noop,\r\n\tonDragComplete: noop,\r\n\r\n\thoverText: {\r\n\t\t...HoverTextNearMouse.defaultProps,\r\n\t\tenable: true,\r\n\t\tbgHeight: 18,\r\n\t\tbgWidth: 120,\r\n\t\ttext: \"Click to select object\",\r\n\t}\r\n};\r\n\r\nexport default EachGannFan;"]}