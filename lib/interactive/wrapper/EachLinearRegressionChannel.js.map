{"version":3,"sources":["../../../../src/lib/interactive/wrapper/EachLinearRegressionChannel.js"],"names":["getNewXY","EachLinearRegressionChannel","props","handleEdge1Drag","bind","handleEdge2Drag","handleHover","isHover","saveNodeType","nodes","state","hover","moreProps","index","onDrag","snapTo","x2Value","x1Value","hovering","setState","appearance","edgeInteractiveCursor","hoverText","interactive","selected","onDragComplete","stroke","strokeWidth","strokeOpacity","fill","fillOpacity","r","edgeStrokeWidth","edgeFill","edgeStroke","hoverHandler","onHover","onUnHover","hoverTextEnabled","enable","hoverTextSelected","selectedText","hoverTextUnselected","text","restHoverTextProps","xScale","xAccessor","plotData","mouseXY","currentItem","x","y","propTypes","defaultClassName","string","any","isRequired","number","shape","func","bool","object","defaultProps","bgHeight","bgWidth"],"mappings":"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","file":"EachLinearRegressionChannel.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { noop } from \"../../utils\";\r\nimport { getCurrentItem } from \"../../utils/ChartDataUtil\";\r\nimport { saveNodeType, isHover } from \"../utils\";\r\n\r\nimport HoverTextNearMouse from \"../components/HoverTextNearMouse\";\r\nimport {\r\n\tdefault as LinearRegressionChannelWithArea,\r\n\tedge1Provider,\r\n\tedge2Provider\r\n} from \"../components/LinearRegressionChannelWithArea\";\r\n\r\nimport ClickableCircle from \"../components/ClickableCircle\";\r\n\r\nclass EachLinearRegressionChannel extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.handleEdge1Drag = this.handleEdge1Drag.bind(this);\r\n\t\tthis.handleEdge2Drag = this.handleEdge2Drag.bind(this);\r\n\r\n\t\tthis.handleHover = this.handleHover.bind(this);\r\n\r\n\t\tthis.isHover = isHover.bind(this);\r\n\t\tthis.saveNodeType = saveNodeType.bind(this);\r\n\t\tthis.nodes = {};\r\n\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t};\r\n\t}\r\n\thandleEdge1Drag(moreProps) {\r\n\t\tconst { index, onDrag, snapTo } = this.props;\r\n\t\tconst {\r\n\t\t\tx2Value,\r\n\t\t} = this.props;\r\n\r\n\t\tconst [x1Value] = getNewXY(moreProps, snapTo);\r\n\r\n\t\tonDrag(index, {\r\n\t\t\tx1Value,\r\n\t\t\tx2Value,\r\n\t\t});\r\n\t}\r\n\thandleEdge2Drag(moreProps) {\r\n\t\tconst { index, onDrag, snapTo } = this.props;\r\n\t\tconst {\r\n\t\t\tx1Value,\r\n\t\t} = this.props;\r\n\r\n\t\tconst [x2Value] = getNewXY(moreProps, snapTo);\r\n\r\n\t\tonDrag(index, {\r\n\t\t\tx1Value,\r\n\t\t\tx2Value,\r\n\t\t});\r\n\t}\r\n\thandleHover(moreProps) {\r\n\t\tif (this.state.hover !== moreProps.hovering) {\r\n\t\t\tthis.setState({\r\n\t\t\t\thover: moreProps.hovering\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tx1Value,\r\n\t\t\tx2Value,\r\n\t\t\tappearance,\r\n\t\t\tedgeInteractiveCursor,\r\n\t\t\thoverText,\r\n\t\t\tinteractive,\r\n\t\t\tselected,\r\n\t\t\tonDragComplete,\r\n\t\t} = this.props;\r\n\t\tconst {\r\n\t\t\tstroke,\r\n\t\t\tstrokeWidth,\r\n\t\t\tstrokeOpacity,\r\n\t\t\tfill,\r\n\t\t\tfillOpacity,\r\n\t\t\tr,\r\n\t\t\tedgeStrokeWidth,\r\n\t\t\tedgeFill,\r\n\t\t\tedgeStroke,\r\n\t\t} = appearance;\r\n\t\tconst { hover } = this.state;\r\n\r\n\t\tconst hoverHandler = interactive\r\n\t\t\t? { onHover: this.handleHover, onUnHover: this.handleHover }\r\n\t\t\t: {};\r\n\r\n\t\tconst {\r\n\t\t\tenable: hoverTextEnabled,\r\n\t\t\tselectedText: hoverTextSelected,\r\n\t\t\ttext: hoverTextUnselected,\r\n\t\t\t...restHoverTextProps\r\n\t\t} = hoverText;\r\n\r\n\t\treturn <g>\r\n\t\t\t<LinearRegressionChannelWithArea\r\n\t\t\t\tref={this.saveNodeType(\"area\")}\r\n\t\t\t\tselected={selected || hover}\r\n\t\t\t\t{...hoverHandler}\r\n\r\n\t\t\t\tx1Value={x1Value}\r\n\t\t\t\tx2Value={x2Value}\r\n\t\t\t\tfill={fill}\r\n\t\t\t\tstroke={stroke}\r\n\t\t\t\tstrokeWidth={(hover || selected) ? strokeWidth + 1 : strokeWidth}\r\n\t\t\t\tstrokeOpacity={strokeOpacity}\r\n\t\t\t\tfillOpacity={fillOpacity} />\r\n\t\t\t<ClickableCircle\r\n\t\t\t\tref={this.saveNodeType(\"edge1\")}\r\n\t\t\t\tshow={selected || hover}\r\n\t\t\t\txyProvider={edge1Provider(this.props)}\r\n\t\t\t\tr={r}\r\n\t\t\t\tfill={edgeFill}\r\n\t\t\t\tstroke={edgeStroke}\r\n\t\t\t\tstrokeWidth={edgeStrokeWidth}\r\n\t\t\t\tinteractiveCursorClass={edgeInteractiveCursor}\r\n\t\t\t\tonDrag={this.handleEdge1Drag}\r\n\t\t\t\tonDragComplete={onDragComplete} />\r\n\t\t\t<ClickableCircle\r\n\t\t\t\tref={this.saveNodeType(\"edge2\")}\r\n\t\t\t\tshow={selected || hover}\r\n\t\t\t\txyProvider={edge2Provider(this.props)}\r\n\t\t\t\tr={r}\r\n\t\t\t\tfill={edgeFill}\r\n\t\t\t\tstroke={edgeStroke}\r\n\t\t\t\tstrokeWidth={edgeStrokeWidth}\r\n\t\t\t\tinteractiveCursorClass={edgeInteractiveCursor}\r\n\t\t\t\tonDrag={this.handleEdge2Drag}\r\n\t\t\t\tonDragComplete={onDragComplete} />\r\n\t\t\t<HoverTextNearMouse\r\n\t\t\t\tshow={hoverTextEnabled && hover}\r\n\t\t\t\t{...restHoverTextProps}\r\n\t\t\t\ttext={selected ? hoverTextSelected : hoverTextUnselected}\r\n\t\t\t/>\r\n\t\t</g>;\r\n\t}\r\n}\r\n\r\nexport function getNewXY(moreProps, snapTo) {\r\n\tconst { xScale, xAccessor, plotData, mouseXY } = moreProps;\r\n\r\n\tconst currentItem = getCurrentItem(xScale, xAccessor, mouseXY, plotData);\r\n\tconst x = xAccessor(currentItem);\r\n\tconst y = snapTo(currentItem);\r\n\r\n\treturn [x, y];\r\n}\r\n\r\nEachLinearRegressionChannel.propTypes = {\r\n\tdefaultClassName: PropTypes.string,\r\n\r\n\tx1Value: PropTypes.any.isRequired,\r\n\tx2Value: PropTypes.any.isRequired,\r\n\r\n\tindex: PropTypes.number,\r\n\r\n\tappearance: PropTypes.shape({\r\n\t\tstroke: PropTypes.string.isRequired,\r\n\t\tfillOpacity: PropTypes.number.isRequired,\r\n\t\tstrokeOpacity: PropTypes.number.isRequired,\r\n\t\tstrokeWidth: PropTypes.number.isRequired,\r\n\t\tfill: PropTypes.string.isRequired,\r\n\t\tedgeStrokeWidth: PropTypes.number.isRequired,\r\n\t\tedgeStroke: PropTypes.string.isRequired,\r\n\t\tedgeFill: PropTypes.string.isRequired,\r\n\t\tr: PropTypes.number.isRequired,\r\n\t}).isRequired,\r\n\r\n\tedgeInteractiveCursor: PropTypes.string,\r\n\tonDrag: PropTypes.func.isRequired,\r\n\tonDragComplete: PropTypes.func.isRequired,\r\n\tsnapTo: PropTypes.func,\r\n\tinteractive: PropTypes.bool.isRequired,\r\n\tselected: PropTypes.bool.isRequired,\r\n\r\n\thoverText: PropTypes.object.isRequired,\r\n};\r\n\r\nEachLinearRegressionChannel.defaultProps = {\r\n\tonDrag: noop,\r\n\tonDragComplete: noop,\r\n\r\n\tappearance: {\r\n\t\tstroke: \"#000000\",\r\n\t\tfillOpacity: 0.7,\r\n\t\tstrokeOpacity: 1,\r\n\t\tstrokeWidth: 1,\r\n\t\tfill: \"#8AAFE2\",\r\n\t\tedgeStrokeWidth: 2,\r\n\t\tedgeStroke: \"#000000\",\r\n\t\tedgeFill: \"#FFFFFF\",\r\n\t\tr: 5,\r\n\t},\r\n\tinteractive: true,\r\n\tselected: false,\r\n\thoverText: {\r\n\t\t...HoverTextNearMouse.defaultProps,\r\n\t\tenable: true,\r\n\t\tbgHeight: 18,\r\n\t\tbgWidth: 175,\r\n\t\ttext: \"Click and drag the edge circles\",\r\n\t}\r\n};\r\n\r\nexport default EachLinearRegressionChannel;"]}