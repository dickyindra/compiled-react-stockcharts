{"version":3,"sources":["../../../src/lib/coordinates/PriceCoordinate.js"],"names":["PriceCoordinate","props","renderSVG","bind","drawOnCanvas","ctx","moreProps","helper","propTypes","displayFormat","func","isRequired","yAxisPad","number","rectWidth","rectHeight","orient","oneOf","at","price","dx","arrowWidth","opacity","lineOpacity","lineStroke","string","fontFamily","fontSize","fill","oneOfType","strokeDasharray","stroke","strokeOpacity","strokeWidth","textFill","defaultProps","width","yScale","chartConfig","domain","lowerYValue","upperYValue","x1","x2","edgeAt","type","y","show","coordinate","invert","hideLine","coordinateProps","lineStrokeDasharray","y1","y2"],"mappings":"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","file":"PriceCoordinate.js","sourcesContent":["\r\n\r\nimport React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { drawOnCanvas, renderSVG } from \"./EdgeCoordinateV3\";\r\nimport GenericChartComponent from \"../GenericChartComponent\";\r\nimport { getAxisCanvas } from \"../GenericComponent\";\r\nimport { functor, strokeDashTypes } from \"../utils\";\r\n\r\nclass PriceCoordinate extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.renderSVG = this.renderSVG.bind(this);\r\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\r\n\t}\r\n\tdrawOnCanvas(ctx, moreProps) {\r\n\t\tconst props = helper(this.props, moreProps);\r\n\t\tdrawOnCanvas(ctx, props);\r\n\t}\r\n\trenderSVG(moreProps) {\r\n\t\tconst props = helper(this.props, moreProps);\r\n\t\treturn renderSVG(props);\r\n\t}\r\n\trender() {\r\n\t\treturn <GenericChartComponent\r\n\t\t\tclip={false}\r\n\t\t\tsvgDraw={this.renderSVG}\r\n\t\t\tcanvasDraw={this.drawOnCanvas}\r\n\t\t\tcanvasToDraw={getAxisCanvas}\r\n\t\t\tdrawOn={[\"pan\"]}\r\n\t\t/>;\r\n\t}\r\n}\r\n\r\nPriceCoordinate.propTypes = {\r\n\tdisplayFormat: PropTypes.func.isRequired,\r\n\tyAxisPad: PropTypes.number,\r\n\trectWidth: PropTypes.number,\r\n\trectHeight: PropTypes.number,\r\n\torient: PropTypes.oneOf([\"bottom\", \"top\", \"left\", \"right\"]),\r\n\tat: PropTypes.oneOf([\"bottom\", \"top\", \"left\", \"right\"]),\r\n\tprice: PropTypes.number,\r\n\tdx: PropTypes.number,\r\n\tarrowWidth: PropTypes.number,\r\n\topacity: PropTypes.number,\r\n\tlineOpacity: PropTypes.number,\r\n\tlineStroke: PropTypes.string,\r\n\tfontFamily: PropTypes.string,\r\n\tfontSize: PropTypes.number,\r\n\tfill: PropTypes.oneOfType([\r\n\t\tPropTypes.string,\r\n\t\tPropTypes.func,\r\n\t]),\r\n\tstrokeDasharray: PropTypes.oneOf(strokeDashTypes),\r\n\tstroke: PropTypes.string,\r\n\tstrokeOpacity: PropTypes.number,\r\n\tstrokeWidth: PropTypes.number,\r\n\ttextFill: PropTypes.oneOfType([\r\n\t\tPropTypes.string,\r\n\t\tPropTypes.func,\r\n\t]),\r\n};\r\n\r\nPriceCoordinate.defaultProps = {\r\n\tyAxisPad: 0,\r\n\trectWidth: 50,\r\n\trectHeight: 20,\r\n\torient: \"left\",\r\n\tat: \"left\",\r\n\tprice: 0,\r\n\tdx: 0,\r\n\tarrowWidth: 0,\r\n\tfill: \"#BAB8b8\",\r\n\topacity: 1,\r\n\tlineOpacity: 0.2,\r\n\tlineStroke: \"#000000\",\r\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\r\n\tfontSize: 13,\r\n\ttextFill: \"#FFFFFF\",\r\n\tstrokeOpacity: 1,\r\n\tstrokeWidth: 1,\r\n\tstrokeDasharray: \"Solid\",\r\n};\r\n\r\nfunction helper(props, moreProps) {\r\n\tconst { width } = moreProps;\r\n\tconst { chartConfig: { yScale } } = moreProps;\r\n\tconst [lowerYValue, upperYValue] = yScale.domain();\r\n\r\n\tconst { price, stroke, strokeDasharray, strokeOpacity, strokeWidth } = props;\r\n\tconst { orient, at, rectWidth, rectHeight, displayFormat, dx } = props;\r\n\tconst { fill, opacity, fontFamily, fontSize, textFill, arrowWidth, lineOpacity, lineStroke } = props;\r\n\r\n\tconst x1 = 0, x2 = width;\r\n\tconst edgeAt = (at === \"right\")\r\n\t\t? width\r\n\t\t: 0;\r\n\r\n\tconst type = \"horizontal\";\r\n\r\n\tconst y = yScale(price);\r\n\tconst show = (price <= upperYValue && price >= lowerYValue);\r\n\r\n\tconst coordinate = displayFormat(yScale.invert(y));\r\n\tconst hideLine = false;\r\n\r\n\tconst coordinateProps = {\r\n\t\tcoordinate,\r\n\t\tshow,\r\n\t\ttype,\r\n\t\torient,\r\n\t\tedgeAt,\r\n\t\thideLine,\r\n\t\tlineOpacity,\r\n\t\tlineStroke,\r\n\t\tlineStrokeDasharray: strokeDasharray,\r\n\t\tstroke,\r\n\t\tstrokeOpacity,\r\n\t\tstrokeWidth,\r\n\t\tfill: functor(fill)(price),\r\n\t\ttextFill: functor(textFill)(price),\r\n\t\topacity, fontFamily, fontSize,\r\n\t\trectWidth,\r\n\t\trectHeight,\r\n\t\tarrowWidth,\r\n\t\tdx,\r\n\t\tx1,\r\n\t\tx2,\r\n\t\ty1: y,\r\n\t\ty2: y,\r\n\t};\r\n\treturn coordinateProps;\r\n}\r\n\r\nexport default PriceCoordinate;\r\n"]}