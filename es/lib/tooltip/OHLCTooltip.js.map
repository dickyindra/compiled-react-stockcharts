{"version":3,"sources":["../../../../src/lib/tooltip/OHLCTooltip.js"],"names":["React","Component","PropTypes","format","timeFormat","displayValuesFor","GenericChartComponent","isDefined","functor","ToolTipText","ToolTipTSpanLabel","OHLCTooltip","props","renderSVG","bind","moreProps","xDisplayFormat","accessor","volumeFormat","ohlcFormat","percentFormat","displayTexts","chartConfig","width","height","displayXAccessor","currentItem","item","displayDate","open","high","low","close","volume","percent","na","originProp","origin","x","y","itemsFormat","Object","keys","map","key","itemsToDisplay","children","propTypes","className","string","func","oneOfType","array","fontFamily","fontSize","number","onClick","textFill","labelFill","object","displayTextsDefault","d","o","h","l","c","v","defaultProps","date","defaultDisplay"],"mappings":"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","file":"OHLCTooltip.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { format } from \"d3-format\";\nimport { timeFormat } from \"d3-time-format\";\nimport displayValuesFor from \"./displayValuesFor\";\nimport GenericChartComponent from \"../GenericChartComponent\";\n\nimport { isDefined, functor } from \"../utils\";\nimport ToolTipText from \"./ToolTipText\";\nimport ToolTipTSpanLabel from \"./ToolTipTSpanLabel\";\n\nclass OHLCTooltip extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t}\n\trenderSVG(moreProps) {\n\t\tconst { displayValuesFor } = this.props;\n\t\tconst {\n\t\t\txDisplayFormat,\n\t\t\taccessor,\n\t\t\tvolumeFormat,\n\t\t\tohlcFormat,\n\t\t\tpercentFormat,\n\t\t\tdisplayTexts,\n\t\t} = this.props;\n\n\t\tconst {\n\t\t\tchartConfig: { width, height },\n\t\t} = moreProps;\n\t\tconst { displayXAccessor } = moreProps;\n\n\t\tconst currentItem = displayValuesFor(this.props, moreProps);\n\n\t\tlet item = {};\n\n\t\tlet displayDate, open, high, low, close, volume, percent;\n\t\tdisplayDate = open = high = low = close = volume = percent =\n            displayTexts.na;\n\n\t\tif (isDefined(currentItem) && isDefined(accessor(currentItem))) {\n\t\t\titem = accessor(currentItem);\n\t\t\tvolume = isDefined(item.volume)\n\t\t\t\t? volumeFormat(item.volume)\n\t\t\t\t: displayTexts.na;\n\n\t\t\tdisplayDate = xDisplayFormat(displayXAccessor(item));\n\t\t\topen = ohlcFormat(item.open);\n\t\t\thigh = ohlcFormat(item.high);\n\t\t\tlow = ohlcFormat(item.low);\n\t\t\tclose = ohlcFormat(item.close);\n\t\t\tpercent = percentFormat((item.close - item.open) / item.open);\n\t\t}\n\n\t\tconst { origin: originProp } = this.props;\n\t\tconst origin = functor(originProp);\n\t\tconst [x, y] = origin(width, height);\n\n\t\tconst itemsFormat = {};\n\t\tObject.keys(item).map(\n\t\t\t(key) => (itemsFormat[key] = ohlcFormat(item[key]))\n\t\t);\n\n\t\tconst itemsToDisplay = {\n\t\t\t...itemsFormat,\n\t\t\tdisplayDate,\n\t\t\topen,\n\t\t\thigh,\n\t\t\tlow,\n\t\t\tclose,\n\t\t\tpercent,\n\t\t\tvolume,\n\t\t\tx,\n\t\t\ty,\n\t\t};\n\t\treturn this.props.children(this.props, moreProps, itemsToDisplay);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<GenericChartComponent\n\t\t\t\tclip={false}\n\t\t\t\tsvgDraw={this.renderSVG}\n\t\t\t\tdrawOn={[\"mousemove\"]}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nOHLCTooltip.propTypes = {\n\tclassName: PropTypes.string,\n\taccessor: PropTypes.func,\n\txDisplayFormat: PropTypes.func,\n\tchildren: PropTypes.func,\n\tvolumeFormat: PropTypes.func,\n\tpercentFormat: PropTypes.func,\n\tohlcFormat: PropTypes.func,\n\torigin: PropTypes.oneOfType([PropTypes.array, PropTypes.func]),\n\tfontFamily: PropTypes.string,\n\tfontSize: PropTypes.number,\n\tonClick: PropTypes.func,\n\tdisplayValuesFor: PropTypes.func,\n\ttextFill: PropTypes.string,\n\tlabelFill: PropTypes.string,\n\tdisplayTexts: PropTypes.object,\n};\n\nconst displayTextsDefault = {\n\td: \"Date: \",\n\to: \" O: \",\n\th: \" H: \",\n\tl: \" L: \",\n\tc: \" C: \",\n\tv: \" Vol: \",\n\tna: \"n/a\",\n};\n\nOHLCTooltip.defaultProps = {\n\taccessor: (d) => {\n\t\treturn {\n\t\t\tdate: d.date,\n\t\t\topen: d.open,\n\t\t\thigh: d.high,\n\t\t\tlow: d.low,\n\t\t\tclose: d.close,\n\t\t\tvolume: d.volume,\n\t\t};\n\t},\n\txDisplayFormat: timeFormat(\"%Y-%m-%d\"),\n\tvolumeFormat: format(\".4s\"),\n\tpercentFormat: format(\".2%\"),\n\tohlcFormat: format(\".2f\"),\n\tdisplayValuesFor: displayValuesFor,\n\torigin: [0, 0],\n\tchildren: defaultDisplay,\n\tdisplayTexts: displayTextsDefault,\n};\n\nfunction defaultDisplay(props, moreProps, itemsToDisplay) {\n\t/* eslint-disable */\n    const {\n        className,\n        textFill,\n        labelFill,\n        onClick,\n        fontFamily,\n        fontSize,\n        displayTexts,\n    } = props;\n    /* eslint-enable */\n\n\tconst {\n\t\tdisplayDate,\n\t\topen,\n\t\thigh,\n\t\tlow,\n\t\tclose,\n\t\tvolume,\n\t\tx,\n\t\ty,\n\t} = itemsToDisplay;\n\treturn (\n\t\t<g\n\t\t\tclassName={`react-stockcharts-tooltip-hover ${className}`}\n\t\t\ttransform={`translate(${x}, ${y})`}\n\t\t\tonClick={onClick}\n\t\t>\n\t\t\t<ToolTipText\n\t\t\t\tx={0}\n\t\t\t\ty={0}\n\t\t\t\tfontFamily={fontFamily}\n\t\t\t\tfontSize={fontSize}\n\t\t\t>\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label\" x={0} dy=\"5\">\n\t\t\t\t\t{displayTexts.d}\n\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t<tspan key=\"value\" fill={textFill}>\n\t\t\t\t\t{displayDate}\n\t\t\t\t</tspan>\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_O\">\n\t\t\t\t\t{displayTexts.o}\n\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t<tspan key=\"value_O\" fill={textFill}>\n\t\t\t\t\t{open}\n\t\t\t\t</tspan>\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_H\">\n\t\t\t\t\t{displayTexts.h}\n\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t<tspan key=\"value_H\" fill={textFill}>\n\t\t\t\t\t{high}\n\t\t\t\t</tspan>\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_L\">\n\t\t\t\t\t{displayTexts.l}\n\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t<tspan key=\"value_L\" fill={textFill}>\n\t\t\t\t\t{low}\n\t\t\t\t</tspan>\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_C\">\n\t\t\t\t\t{displayTexts.c}\n\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t<tspan key=\"value_C\" fill={textFill}>\n\t\t\t\t\t{close}\n\t\t\t\t</tspan>\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_Vol\">\n\t\t\t\t\t{displayTexts.v}\n\t\t\t\t</ToolTipTSpanLabel>\n\t\t\t\t<tspan key=\"value_Vol\" fill={textFill}>\n\t\t\t\t\t{volume}\n\t\t\t\t</tspan>\n\t\t\t</ToolTipText>\n\t\t</g>\n\t);\n}\n\nexport default OHLCTooltip;\n"]}