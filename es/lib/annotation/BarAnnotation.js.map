{"version":3,"sources":["../../../../src/lib/annotation/BarAnnotation.js"],"names":["React","Component","PropTypes","functor","BarAnnotation","props","handleClick","bind","e","onClick","xScale","yScale","datum","className","stroke","opacity","xAccessor","path","text","textXOffset","textYOffset","textAnchor","fontFamily","fontSize","textFill","textOpacity","textRotate","helper","x","y","fill","tooltip","textIcon","textIconFontSize","textIconFill","textIconOpacity","textIconRotate","textIconXOffset","textIconYOffset","plotData","xFunc","yFunc","xPos","yPos","getArrowForTextIcon","type","arrows","simpleUp","simpleDown","fatUp","fatDown","lightUp","lightDown","dashedUp","dashedDown","dashedRight","fatRight","right","propTypes","string","func","object","number","textIconAnchor","defaultProps"],"mappings":"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","file":"BarAnnotation.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { functor } from \"../utils\";\r\n\r\nclass BarAnnotation extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.handleClick = this.handleClick.bind(this);\r\n\t}\r\n\thandleClick(e) {\r\n\t\tconst { onClick } = this.props;\r\n\r\n\t\tif (onClick) {\r\n\t\t\tconst { xScale, yScale, datum } = this.props;\r\n\t\t\tonClick({ xScale, yScale, datum }, e);\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tconst { className, stroke, opacity } = this.props;\r\n\t\tconst { xAccessor, xScale, yScale, path } = this.props;\r\n\t\tconst {\r\n\t\t\ttext,\r\n\t\t\ttextXOffset,\r\n\t\t\ttextYOffset,\r\n\t\t\ttextAnchor,\r\n\t\t\tfontFamily,\r\n\t\t\tfontSize,\r\n\t\t\ttextFill,\r\n\t\t\ttextOpacity,\r\n\t\t\ttextRotate\r\n\t\t} = this.props;\r\n\t\tconst { x, y, fill, tooltip } = helper(\r\n\t\t\tthis.props,\r\n\t\t\txAccessor,\r\n\t\t\txScale,\r\n\t\t\tyScale\r\n\t\t);\r\n\t\tconst {\r\n\t\t\ttextIcon,\r\n\t\t\ttextIconFontSize,\r\n\t\t\ttextIconFill,\r\n\t\t\ttextIconOpacity,\r\n\t\t\ttextIconRotate,\r\n\t\t\ttextIconXOffset,\r\n\t\t\ttextIconYOffset\r\n\t\t} = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<g className={className} onClick={this.handleClick}>\r\n\t\t\t\t{tooltip != null ? <title>{tooltip}</title> : null}\r\n\t\t\t\t{text != null ? (\r\n\t\t\t\t\t<text\r\n\t\t\t\t\t\tx={x}\r\n\t\t\t\t\t\ty={y}\r\n\t\t\t\t\t\tdx={textXOffset}\r\n\t\t\t\t\t\tdy={textYOffset}\r\n\t\t\t\t\t\tfontFamily={fontFamily}\r\n\t\t\t\t\t\tfontSize={fontSize}\r\n\t\t\t\t\t\tfill={textFill}\r\n\t\t\t\t\t\topacity={textOpacity}\r\n\t\t\t\t\t\ttransform={\r\n\t\t\t\t\t\t\ttextRotate != null\r\n\t\t\t\t\t\t\t\t? `rotate(${textRotate}, ${x}, ${y})`\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttextAnchor={textAnchor}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{text}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t) : null}\r\n\t\t\t\t{textIcon != null ? (\r\n\t\t\t\t\t<text\r\n\t\t\t\t\t\tx={x}\r\n\t\t\t\t\t\ty={y}\r\n\t\t\t\t\t\tdx={textIconXOffset}\r\n\t\t\t\t\t\tdy={textIconYOffset}\r\n\t\t\t\t\t\tfontSize={textIconFontSize}\r\n\t\t\t\t\t\tfill={textIconFill}\r\n\t\t\t\t\t\topacity={textIconOpacity}\r\n\t\t\t\t\t\ttransform={\r\n\t\t\t\t\t\t\ttextIconRotate != null\r\n\t\t\t\t\t\t\t\t? `rotate(${textIconRotate}, ${x}, ${y})`\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttextAnchor={textAnchor}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{textIcon}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t) : null}\r\n\t\t\t\t{path != null ? (\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td={path({ x, y })}\r\n\t\t\t\t\t\tstroke={stroke}\r\n\t\t\t\t\t\tfill={fill}\r\n\t\t\t\t\t\topacity={opacity}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : null}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction helper(props, xAccessor, xScale, yScale) {\r\n\tconst { x, y, datum, fill, tooltip, plotData } = props;\r\n\r\n\tconst xFunc = functor(x);\r\n\tconst yFunc = functor(y);\r\n\r\n\tconst [xPos, yPos] = [\r\n\t\txFunc({ xScale, xAccessor, datum, plotData }),\r\n\t\tyFunc({ yScale, datum, plotData })\r\n\t];\r\n\r\n\treturn {\r\n\t\tx: xPos,\r\n\t\ty: yPos,\r\n\t\tfill: functor(fill)(datum),\r\n\t\ttooltip: functor(tooltip)(datum)\r\n\t};\r\n}\r\n\r\n/**\r\n * any unicode can be applied.\r\n * @param {any} type\r\n */\r\n\r\nexport function getArrowForTextIcon(type) {\r\n\tconst arrows = {\r\n\t\tsimpleUp: \"⬆\",\r\n\t\tsimpleDown: \"⬇\",\r\n\t\tfatUp: \"▲\",\r\n\t\tfatDown: \"▼\",\r\n\t\tlightUp: \"↑\",\r\n\t\tlightDown: \"↓\",\r\n\t\tdashedUp: \"⇡\",\r\n\t\tdashedDown: \"⇣\",\r\n\t\tdashedRight: \"➟\",\r\n\t\tfatRight: \"➡\",\r\n\t\tright: \"➤\"\r\n\t};\r\n\treturn arrows[type];\r\n}\r\n\r\nBarAnnotation.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\tpath: PropTypes.func,\r\n\tonClick: PropTypes.func,\r\n\txAccessor: PropTypes.func,\r\n\txScale: PropTypes.func,\r\n\tyScale: PropTypes.func,\r\n\tdatum: PropTypes.object,\r\n\tstroke: PropTypes.string,\r\n\tfill: PropTypes.string,\r\n\topacity: PropTypes.number,\r\n\ttext: PropTypes.string,\r\n\ttextAnchor: PropTypes.string,\r\n\tfontFamily: PropTypes.string,\r\n\tfontSize: PropTypes.number,\r\n\ttextOpacity: PropTypes.number,\r\n\ttextFill: PropTypes.string,\r\n\ttextRotate: PropTypes.number,\r\n\ttextXOffset: PropTypes.number,\r\n\ttextYOffset: PropTypes.number,\r\n\ttextIcon: PropTypes.string,\r\n\ttextIconFontSize: PropTypes.number,\r\n\ttextIconOpacity: PropTypes.number,\r\n\ttextIconFill: PropTypes.string,\r\n\ttextIconRotate: PropTypes.number,\r\n\ttextIconXOffset: PropTypes.number,\r\n\ttextIconYOffset: PropTypes.number,\r\n\ttextIconAnchor: PropTypes.string\r\n};\r\n\r\nBarAnnotation.defaultProps = {\r\n\tclassName: \"react-stockcharts-bar-annotation\",\r\n\topacity: 1,\r\n\tfill: \"#000000\",\r\n\ttextAnchor: \"middle\",\r\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\r\n\tfontSize: 10,\r\n\ttextFill: \"#000000\",\r\n\ttextOpacity: 1,\r\n\ttextIconFill: \"#000000\",\r\n\ttextIconFontSize: 10,\r\n\tx: ({ xScale, xAccessor, datum }) => xScale(xAccessor(datum))\r\n};\r\n\r\nexport default BarAnnotation;\r\n"]}