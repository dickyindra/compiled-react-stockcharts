{"version":3,"sources":["../../../../src/lib/indicator/heikinAshi.js"],"names":["heikinAshi","baseIndicator","rebind","merge","ALGORITHM_TYPE","base","type","accessor","d","ha","underlyingAlgorithm","mergedAlgorithm","algorithm","datum","indicator","data","options","Error"],"mappings":";;AAEA,SAASA,UAAT,QAA2B,eAA3B;AACA,OAAOC,aAAP,MAA0B,iBAA1B;;AAEA,SAASC,MAAT,EAAiBC,KAAjB,QAA8B,UAA9B;;AAEA,IAAMC,iBAAiB,YAAvB;;AAEA,eAAe,YAAW;;AAEzB,KAAMC,OAAOJ,gBACXK,IADW,CACNF,cADM,EAEXG,QAFW,CAEF;AAAA,SAAKC,EAAEC,EAAP;AAAA,EAFE,CAAb;;AAIA,KAAMC,sBAAsBV,YAA5B;;AAEA,KAAMW,kBAAkBR,QACtBS,SADsB,CACZF,mBADY,EAEtBP,KAFsB,CAEhB,UAACU,KAAD,EAAQC,SAAR,EAAsB;AAC5B,sBAAYD,KAAZ,EAAsBC,SAAtB;AACA,EAJsB,CAAxB;;AAMA,KAAMA,YAAY,SAAZA,SAAY,CAASC,IAAT,EAA0C;AAAA,MAA3BC,OAA2B,uEAAjB,EAAEb,OAAO,IAAT,EAAiB;;AAC3D,MAAIa,QAAQb,KAAZ,EAAmB;AAClB,OAAI,CAACE,KAAKE,QAAL,EAAL,EAAsB,MAAM,IAAIU,KAAJ,yBAAgCb,cAAhC,yBAAN;AACtB,UAAOO,gBAAgBI,IAAhB,CAAP;AACA;AACD,SAAOL,oBAAoBK,IAApB,CAAP;AACA,EAND;;AAQAb,QAAOY,SAAP,EAAkBT,IAAlB,EAAwB,UAAxB,EAAoC,QAApC,EAA8C,MAA9C,EAAsD,MAAtD,EAA8D,MAA9D;AACA;AACAH,QAAOY,SAAP,EAAkBH,eAAlB,EAAmC,OAAnC;;AAEA,QAAOG,SAAP;AACA","file":"heikinAshi.js","sourcesContent":["\r\n\r\nimport { heikinAshi } from \"../calculator\";\r\nimport baseIndicator from \"./baseIndicator\";\r\n\r\nimport { rebind, merge } from \"../utils\";\r\n\r\nconst ALGORITHM_TYPE = \"HeikinAshi\";\r\n\r\nexport default function() {\r\n\r\n\tconst base = baseIndicator()\r\n\t\t.type(ALGORITHM_TYPE)\r\n\t\t.accessor(d => d.ha);\r\n\r\n\tconst underlyingAlgorithm = heikinAshi();\r\n\r\n\tconst mergedAlgorithm = merge()\r\n\t\t.algorithm(underlyingAlgorithm)\r\n\t\t.merge((datum, indicator) => {\r\n\t\t\treturn { ...datum, ...indicator };\r\n\t\t});\r\n\r\n\tconst indicator = function(data, options = { merge: true }) {\r\n\t\tif (options.merge) {\r\n\t\t\tif (!base.accessor()) throw new Error(`Set an accessor to ${ALGORITHM_TYPE} before calculating`);\r\n\t\t\treturn mergedAlgorithm(data);\r\n\t\t}\r\n\t\treturn underlyingAlgorithm(data);\r\n\t};\r\n\r\n\trebind(indicator, base, \"accessor\", \"stroke\", \"fill\", \"echo\", \"type\");\r\n\t// rebind(indicator, underlyingAlgorithm, \"windowSize\", \"source\");\r\n\trebind(indicator, mergedAlgorithm, \"merge\");\r\n\r\n\treturn indicator;\r\n}\r\n"]}