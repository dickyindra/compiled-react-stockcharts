{"version":3,"sources":["../../../../src/lib/series/ElderRaySeries.js"],"names":["React","Component","PropTypes","OverlayBarSeries","StraightLine","ElderRaySeries","props","fillForEachBar","bind","yAccessorTop","yAccessorBullTop","yAccessorBearTop","yAccessorBullBottom","yAccessorBearBottom","yAccessorForBarBase","d","yAccessor","Math","max","bullPower","undefined","bearPower","min","xScale","yScale","y","yAccessorNumber","bullPowerFill","bearPowerFill","className","opacity","stroke","straightLineStroke","straightLineOpacity","widthRatio","clip","propTypes","string","func","number","bool","isRequired","defaultProps"],"mappings":"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","file":"ElderRaySeries.js","sourcesContent":["\r\n\r\nimport React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport OverlayBarSeries from \"./OverlayBarSeries\";\r\nimport StraightLine from \"./StraightLine\";\r\n\r\nclass ElderRaySeries extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.fillForEachBar = this.fillForEachBar.bind(this);\r\n\t\tthis.yAccessorTop = this.yAccessorTop.bind(this);\r\n\t\tthis.yAccessorBullTop = this.yAccessorBullTop.bind(this);\r\n\t\tthis.yAccessorBearTop = this.yAccessorBearTop.bind(this);\r\n\t\tthis.yAccessorBullBottom = this.yAccessorBullBottom.bind(this);\r\n\t\tthis.yAccessorBearBottom = this.yAccessorBearBottom.bind(this);\r\n\t\tthis.yAccessorForBarBase = this.yAccessorForBarBase.bind(this);\r\n\t}\r\n\tyAccessorTop(d) {\r\n\t\tconst { yAccessor } = this.props;\r\n\t\treturn yAccessor(d) && Math.max(yAccessor(d).bullPower, 0);\r\n\t}\r\n\tyAccessorBullTop(d) {\r\n\t\tconst { yAccessor } = this.props;\r\n\t\treturn yAccessor(d) && (yAccessor(d).bullPower > 0 ? yAccessor(d).bullPower : undefined);\r\n\t}\r\n\tyAccessorBearTop(d) {\r\n\t\tconst { yAccessor } = this.props;\r\n\t\treturn yAccessor(d) && (yAccessor(d).bearPower > 0 ? yAccessor(d).bearPower : undefined);\r\n\t}\r\n\tyAccessorBullBottom(d) {\r\n\t\tconst { yAccessor } = this.props;\r\n\t\treturn yAccessor(d) && (yAccessor(d).bullPower < 0 ? 0 : undefined);\r\n\t}\r\n\tyAccessorBearBottom(d) {\r\n\t\tconst { yAccessor } = this.props;\r\n\t\treturn yAccessor(d) && (yAccessor(d).bullPower < 0\r\n\t\t\t\t|| yAccessor(d).bullPower * yAccessor(d).bearPower < 0 // bullPower is +ve and bearPower is -ve\r\n\t\t\t? Math.min(0, yAccessor(d).bullPower) : undefined);\r\n\t}\r\n\tyAccessorForBarBase(xScale, yScale, d) {\r\n\t\tconst { yAccessor } = this.props;\r\n\t\tconst y = yAccessor(d) && Math.min(yAccessor(d).bearPower, 0);\r\n\t\treturn yScale(y);\r\n\t}\r\n\tfillForEachBar(d, yAccessorNumber) {\r\n\t\tconst { bullPowerFill, bearPowerFill } = this.props;\r\n\t\treturn yAccessorNumber % 2 === 0 ? bullPowerFill : bearPowerFill;\r\n\t}\r\n\trender() {\r\n\t\tconst { className, opacity, stroke,\r\n\t\t\tstraightLineStroke,\r\n\t\t\tstraightLineOpacity,\r\n\t\t\twidthRatio\r\n\t\t} = this.props;\r\n\t\tconst { clip } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<g className={className}>\r\n\t\t\t\t<OverlayBarSeries\r\n\t\t\t\t\tbaseAt={this.yAccessorForBarBase}\r\n\t\t\t\t\tclassName=\"react-stockcharts-elderray-bar\"\r\n\t\t\t\t\tstroke={stroke}\r\n\t\t\t\t\tfill={this.fillForEachBar}\r\n\t\t\t\t\topacity={opacity}\r\n\t\t\t\t\twidthRatio={widthRatio}\r\n\t\t\t\t\tclip={clip}\r\n\t\t\t\t\tyAccessor={[this.yAccessorBullTop, this.yAccessorBearTop, this.yAccessorBullBottom, this.yAccessorBearBottom]} />\r\n\t\t\t\t<StraightLine\r\n\t\t\t\t\tclassName=\"react-stockcharts-elderray-straight-line\"\r\n\t\t\t\t\tyValue={0}\r\n\t\t\t\t\tstroke={straightLineStroke}\r\n\t\t\t\t\topacity={straightLineOpacity} />\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nElderRaySeries.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\tyAccessor: PropTypes.func,\r\n\topacity: PropTypes.number,\r\n\tstroke: PropTypes.bool,\r\n\tbullPowerFill: PropTypes.string,\r\n\tbearPowerFill: PropTypes.string,\r\n\tstraightLineStroke: PropTypes.string,\r\n\tstraightLineOpacity: PropTypes.number,\r\n\twidthRatio: PropTypes.number,\r\n\tclip: PropTypes.bool.isRequired,\r\n};\r\n\r\nElderRaySeries.defaultProps = {\r\n\tclassName: \"react-stockcharts-elderray-series\",\r\n\tstraightLineStroke: \"#000000\",\r\n\tstraightLineOpacity: 0.3,\r\n\topacity: 0.5,\r\n\tstroke: true,\r\n\tbullPowerFill: \"#6BA583\",\r\n\tbearPowerFill: \"#FF0000\",\r\n\twidthRatio: 0.8,\r\n\tclip: true,\r\n};\r\n\r\nexport default ElderRaySeries;\r\n"]}