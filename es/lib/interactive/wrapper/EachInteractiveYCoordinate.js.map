{"version":3,"sources":["../../../../../src/lib/interactive/wrapper/EachInteractiveYCoordinate.js"],"names":["React","Component","PropTypes","noop","saveNodeType","isHover","ClickableShape","InteractiveYCoordinate","EachInteractiveYCoordinate","props","handleHover","bind","handleCloseIconHover","handleDragStart","handleDrag","handleDelete","nodes","state","hover","closeIconHover","moreProps","yValue","mouseXY","yScale","chartConfig","mouseY","dy","dragStartPosition","index","onDrag","newYValue","invert","onDelete","hovering","setState","bgFill","bgOpacity","textFill","fontFamily","fontSize","fontWeight","fontStyle","text","selected","onDragComplete","stroke","strokeOpacity","strokeDasharray","strokeWidth","edge","textBox","draggable","hoverHandler","onHover","onUnHover","dragProps","onDragStart","propTypes","number","bool","isRequired","string","object","func","defaultProps","opacity","fill"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;;AAEA,SAASC,IAAT,QAAqB,aAArB;AACA,SAASC,YAAT,EAAuBC,OAAvB,QAAsC,UAAtC;;AAEA,OAAOC,cAAP,MAA2B,8BAA3B;AACA,OAAOC,sBAAP,MAAmC,sCAAnC;;IAEMC,0B;;;AACL,qCAAYC,KAAZ,EAAmB;AAAA;;AAAA,sJACZA,KADY;;AAGlB,QAAKC,WAAL,GAAmB,MAAKA,WAAL,CAAiBC,IAAjB,OAAnB;AACA,QAAKC,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BD,IAA1B,OAA5B;;AAEA,QAAKE,eAAL,GAAuB,MAAKA,eAAL,CAAqBF,IAArB,OAAvB;AACA,QAAKG,UAAL,GAAkB,MAAKA,UAAL,CAAgBH,IAAhB,OAAlB;;AAEA,QAAKI,YAAL,GAAoB,MAAKA,YAAL,CAAkBJ,IAAlB,OAApB;;AAEA,QAAKN,OAAL,GAAeA,QAAQM,IAAR,OAAf;AACA,QAAKP,YAAL,GAAoBA,aAAaO,IAAb,OAApB;AACA,QAAKK,KAAL,GAAa,EAAb;;AAEA,QAAKC,KAAL,GAAa;AACZC,UAAO,KADK;AAEZC,mBAAgB;AAFJ,GAAb;AAfkB;AAmBlB;;;;kCACeC,S,EAAW;AAAA,OAEzBC,MAFyB,GAGtB,KAAKZ,KAHiB,CAEzBY,MAFyB;AAAA,OAIlBC,OAJkB,GAINF,SAJM,CAIlBE,OAJkB;AAAA,OAKHC,MALG,GAKUH,SALV,CAKlBI,WALkB,CAKHD,MALG;;AAAA,iCAMPD,OANO;AAAA,OAMjBG,MANiB;;AAQ1B,OAAMC,KAAKD,SAASF,OAAOF,MAAP,CAApB;;AAEA,QAAKM,iBAAL,GAAyB;AACxBN,kBADwB,EAChBK;AADgB,IAAzB;AAGA;;;6BACUN,S,EAAW;AAAA,gBACK,KAAKX,KADV;AAAA,OACbmB,KADa,UACbA,KADa;AAAA,OACNC,MADM,UACNA,MADM;;AAAA,2CAKjBT,SALiB,CAGpBE,OAHoB;AAAA,OAGRG,MAHQ;AAAA,OAILF,MAJK,GAKjBH,SALiB,CAIpBI,WAJoB,CAILD,MAJK;;AAAA,OAObG,EAPa,GAON,KAAKC,iBAPC,CAObD,EAPa;;;AASrB,OAAMI,YAAYP,OAAOQ,MAAP,CAAcN,SAASC,EAAvB,CAAlB;;AAEAG,UAAOD,KAAP,EAAcE,SAAd;AACA;;;+BACYV,S,EAAW;AAAA,iBACK,KAAKX,KADV;AAAA,OACfmB,KADe,WACfA,KADe;AAAA,OACRI,QADQ,WACRA,QADQ;;AAEvBA,YAASJ,KAAT,EAAgBR,SAAhB;AACA;;;8BACWA,S,EAAW;AACtB,OAAI,KAAKH,KAAL,CAAWC,KAAX,KAAqBE,UAAUa,QAAnC,EAA6C;AAC5C,SAAKC,QAAL,CAAc;AACbhB,YAAOE,UAAUa,QADJ;AAEbd,qBAAgBC,UAAUa,QAAV,GAAqB,KAAKhB,KAAL,CAAWE,cAAhC,GAAiD;AAFpD,KAAd;AAIA;AACD;;;uCACoBC,S,EAAW;AAC/B,OAAI,KAAKH,KAAL,CAAWE,cAAX,KAA8BC,UAAUa,QAA5C,EAAsD;AACrD,SAAKC,QAAL,CAAc;AACbf,qBAAgBC,UAAUa;AADb,KAAd;AAGA;AACD;;;2BACQ;AAAA,iBAqBJ,KAAKxB,KArBD;AAAA,OAEPY,MAFO,WAEPA,MAFO;AAAA,OAGPc,MAHO,WAGPA,MAHO;AAAA,OAIPC,SAJO,WAIPA,SAJO;AAAA,OAKPC,QALO,WAKPA,QALO;AAAA,OAMPC,UANO,WAMPA,UANO;AAAA,OAOPC,QAPO,WAOPA,QAPO;AAAA,OAQPC,UARO,WAQPA,UARO;AAAA,OASPC,SATO,WASPA,SATO;AAAA,OAUPC,IAVO,WAUPA,IAVO;AAAA,OAYPC,QAZO,WAYPA,QAZO;AAAA,OAaPC,cAbO,WAaPA,cAbO;AAAA,OAcPC,MAdO,WAcPA,MAdO;AAAA,OAePC,aAfO,WAePA,aAfO;AAAA,OAgBPC,eAhBO,WAgBPA,eAhBO;AAAA,OAiBPC,WAjBO,WAiBPA,WAjBO;AAAA,OAkBPC,IAlBO,WAkBPA,IAlBO;AAAA,OAmBPC,OAnBO,WAmBPA,OAnBO;AAAA,OAoBPC,SApBO,WAoBPA,SApBO;AAAA,gBAsB0B,KAAKlC,KAtB/B;AAAA,OAsBAC,KAtBA,UAsBAA,KAtBA;AAAA,OAsBOC,cAtBP,UAsBOA,cAtBP;;;AAwBR,OAAMiC,eAAe;AACpBC,aAAS,KAAK3C,WADM;AAEpB4C,eAAW,KAAK5C;AAFI,IAArB;;AAKA,OAAM6C,YAAYJ,YACf;AACDK,iBAAa,KAAK3C,eADjB;AAEDgB,YAAQ,KAAKf,UAFZ;AAGD8B,oBAAgBA;AAHf,IADe,GAMf,EANH;AAOA,UACC;AAAA;AAAA;AACC,wBAAC,sBAAD;AACC,UAAK,KAAKxC,YAAL,CAAkB,iBAAlB,CADN;AAEC,eAAUuC,YAAY,CAACxB,cAFxB;AAGC,eAAUD,SAASC,cAHpB;AAIC,6BAAuB;AAJxB,OAKKiC,YALL,EAOKG,SAPL;;AASC,aAAQlC,MATT;AAUC,aAAQc,MAVT;AAWC,gBAAWC,SAXZ;AAYC,eAAUC,QAZX;AAaC,iBAAYC,UAbb;AAcC,gBAAWG,SAdZ;AAeC,iBAAYD,UAfb;AAgBC,eAAUD,QAhBX;AAiBC,aAAQM,MAjBT;AAkBC,oBAAeC,aAlBhB;AAmBC,sBAAiBC,eAnBlB;AAoBC,kBAAaC,WApBd;AAqBC,WAAMN,IArBP;AAsBC,cAASQ,OAtBV;AAuBC,WAAMD;AAvBP,OADD;AA0BC,wBAAC,cAAD;AACC,eADD;AAEC,eAAU9B,cAFX;AAGC,WAAMuB,IAHP;AAIC,aAAQrB,MAJT;AAKC,iBAAYiB,UALb;AAMC,gBAAWG,SANZ;AAOC,iBAAYD,UAPb;AAQC,eAAUD,QARX;AASC,cAASW,OATV;;AAWC,aAAQL,MAXT;AAYC,oBAAeC,aAZhB;;AAcC,cAAS,KAAKlC,oBAdf;AAeC,gBAAW,KAAKA,oBAfjB;AAgBC,cAAS,KAAKG;AAhBf;AA1BD,IADD;AAmDA;;;;EA1JuCd,S;;AA6JzCO,2BAA2BiD,SAA3B,GAAuC;AACtC7B,QAAO1B,UAAUwD,MADqB;;AAGtCP,YAAWjD,UAAUyD,IAAV,CAAeC,UAHY;AAItCvC,SAAQnB,UAAUwD,MAAV,CAAiBE,UAJa;;AAMtCzB,SAAQjC,UAAU2D,MAAV,CAAiBD,UANa;AAOtCxB,YAAWlC,UAAUwD,MAAV,CAAiBE,UAPU;AAQtCf,SAAQ3C,UAAU2D,MAAV,CAAiBD,UARa;AAStCZ,cAAa9C,UAAUwD,MAAV,CAAiBE,UATQ;AAUtCd,gBAAe5C,UAAUwD,MAAV,CAAiBE,UAVM;AAWtCb,kBAAiB7C,UAAU2D,MAAV,CAAiBD,UAXI;AAYtCvB,WAAUnC,UAAU2D,MAAV,CAAiBD,UAZW;;AActCpB,aAAYtC,UAAU2D,MAAV,CAAiBD,UAdS;AAetCtB,aAAYpC,UAAU2D,MAAV,CAAiBD,UAfS;AAgBtCnB,YAAWvC,UAAU2D,MAAV,CAAiBD,UAhBU;AAiBtCrB,WAAUrC,UAAUwD,MAAV,CAAiBE,UAjBW;;AAmBtClB,OAAMxC,UAAU2D,MAAV,CAAiBD,UAnBe;AAoBtCjB,WAAUzC,UAAUyD,IAAV,CAAeC,UApBa;;AAsBtCX,OAAM/C,UAAU4D,MAAV,CAAiBF,UAtBe;AAuBtCV,UAAShD,UAAU4D,MAAV,CAAiBF,UAvBY;;AAyBtC/B,SAAQ3B,UAAU6D,IAAV,CAAeH,UAzBe;AA0BtChB,iBAAgB1C,UAAU6D,IAAV,CAAeH,UA1BO;AA2BtC5B,WAAU9B,UAAU6D,IAAV,CAAeH;AA3Ba,CAAvC;;AA8BApD,2BAA2BwD,YAA3B,GAA0C;AACzCnC,SAAQ1B,IADiC;AAEzCyC,iBAAgBzC,IAFyB;;AAIzC6C,cAAa,CAJ4B;AAKzCiB,UAAS,CALgC;AAMzCtB,WAAU,KAN+B;AAOzCuB,OAAM,SAPmC;AAQzCf,YAAW;AAR8B,CAA1C;;AAWA,eAAe3C,0BAAf","file":"EachInteractiveYCoordinate.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { noop } from \"../../utils\";\r\nimport { saveNodeType, isHover } from \"../utils\";\r\n\r\nimport ClickableShape from \"../components/ClickableShape\";\r\nimport InteractiveYCoordinate from \"../components/InteractiveYCoordinate\";\r\n\r\nclass EachInteractiveYCoordinate extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.handleHover = this.handleHover.bind(this);\r\n\t\tthis.handleCloseIconHover = this.handleCloseIconHover.bind(this);\r\n\r\n\t\tthis.handleDragStart = this.handleDragStart.bind(this);\r\n\t\tthis.handleDrag = this.handleDrag.bind(this);\r\n\r\n\t\tthis.handleDelete = this.handleDelete.bind(this);\r\n\r\n\t\tthis.isHover = isHover.bind(this);\r\n\t\tthis.saveNodeType = saveNodeType.bind(this);\r\n\t\tthis.nodes = {};\r\n\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t\tcloseIconHover: false,\r\n\t\t};\r\n\t}\r\n\thandleDragStart(moreProps) {\r\n\t\tconst {\r\n\t\t\tyValue,\r\n\t\t} = this.props;\r\n\t\tconst { mouseXY } = moreProps;\r\n\t\tconst { chartConfig: { yScale } } = moreProps;\r\n\t\tconst [, mouseY] = mouseXY;\r\n\r\n\t\tconst dy = mouseY - yScale(yValue);\r\n\r\n\t\tthis.dragStartPosition = {\r\n\t\t\tyValue, dy\r\n\t\t};\r\n\t}\r\n\thandleDrag(moreProps) {\r\n\t\tconst { index, onDrag } = this.props;\r\n\t\tconst {\r\n\t\t\tmouseXY: [, mouseY],\r\n\t\t\tchartConfig: { yScale },\r\n\t\t} = moreProps;\r\n\r\n\t\tconst { dy } = this.dragStartPosition;\r\n\r\n\t\tconst newYValue = yScale.invert(mouseY - dy);\r\n\r\n\t\tonDrag(index, newYValue);\r\n\t}\r\n\thandleDelete(moreProps) {\r\n\t\tconst { index, onDelete } = this.props;\r\n\t\tonDelete(index, moreProps);\r\n\t}\r\n\thandleHover(moreProps) {\r\n\t\tif (this.state.hover !== moreProps.hovering) {\r\n\t\t\tthis.setState({\r\n\t\t\t\thover: moreProps.hovering,\r\n\t\t\t\tcloseIconHover: moreProps.hovering ? this.state.closeIconHover : false\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\thandleCloseIconHover(moreProps) {\r\n\t\tif (this.state.closeIconHover !== moreProps.hovering) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tcloseIconHover: moreProps.hovering\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tyValue,\r\n\t\t\tbgFill,\r\n\t\t\tbgOpacity,\r\n\t\t\ttextFill,\r\n\t\t\tfontFamily,\r\n\t\t\tfontSize,\r\n\t\t\tfontWeight,\r\n\t\t\tfontStyle,\r\n\t\t\ttext,\r\n\t\t\t// hoverText,\r\n\t\t\tselected,\r\n\t\t\tonDragComplete,\r\n\t\t\tstroke,\r\n\t\t\tstrokeOpacity,\r\n\t\t\tstrokeDasharray,\r\n\t\t\tstrokeWidth,\r\n\t\t\tedge,\r\n\t\t\ttextBox,\r\n\t\t\tdraggable,\r\n\t\t} = this.props;\r\n\t\tconst { hover, closeIconHover } = this.state;\r\n\r\n\t\tconst hoverHandler = {\r\n\t\t\tonHover: this.handleHover,\r\n\t\t\tonUnHover: this.handleHover\r\n\t\t};\r\n\r\n\t\tconst dragProps = draggable\r\n\t\t\t? {\r\n\t\t\t\tonDragStart: this.handleDragStart,\r\n\t\t\t\tonDrag: this.handleDrag,\r\n\t\t\t\tonDragComplete: onDragComplete,\r\n\t\t\t}\r\n\t\t\t: {};\r\n\t\treturn (\r\n\t\t\t<g>\r\n\t\t\t\t<InteractiveYCoordinate\r\n\t\t\t\t\tref={this.saveNodeType(\"priceCoordinate\")}\r\n\t\t\t\t\tselected={selected && !closeIconHover}\r\n\t\t\t\t\thovering={hover || closeIconHover}\r\n\t\t\t\t\tinteractiveCursorClass=\"react-stockcharts-move-cursor\"\r\n\t\t\t\t\t{...hoverHandler}\r\n\r\n\t\t\t\t\t{...dragProps}\r\n\r\n\t\t\t\t\tyValue={yValue}\r\n\t\t\t\t\tbgFill={bgFill}\r\n\t\t\t\t\tbgOpacity={bgOpacity}\r\n\t\t\t\t\ttextFill={textFill}\r\n\t\t\t\t\tfontFamily={fontFamily}\r\n\t\t\t\t\tfontStyle={fontStyle}\r\n\t\t\t\t\tfontWeight={fontWeight}\r\n\t\t\t\t\tfontSize={fontSize}\r\n\t\t\t\t\tstroke={stroke}\r\n\t\t\t\t\tstrokeOpacity={strokeOpacity}\r\n\t\t\t\t\tstrokeDasharray={strokeDasharray}\r\n\t\t\t\t\tstrokeWidth={strokeWidth}\r\n\t\t\t\t\ttext={text}\r\n\t\t\t\t\ttextBox={textBox}\r\n\t\t\t\t\tedge={edge}\r\n\t\t\t\t/>\r\n\t\t\t\t<ClickableShape\r\n\t\t\t\t\tshow\r\n\t\t\t\t\thovering={closeIconHover}\r\n\t\t\t\t\ttext={text}\r\n\t\t\t\t\tyValue={yValue}\r\n\t\t\t\t\tfontFamily={fontFamily}\r\n\t\t\t\t\tfontStyle={fontStyle}\r\n\t\t\t\t\tfontWeight={fontWeight}\r\n\t\t\t\t\tfontSize={fontSize}\r\n\t\t\t\t\ttextBox={textBox}\r\n\r\n\t\t\t\t\tstroke={stroke}\r\n\t\t\t\t\tstrokeOpacity={strokeOpacity}\r\n\r\n\t\t\t\t\tonHover={this.handleCloseIconHover}\r\n\t\t\t\t\tonUnHover={this.handleCloseIconHover}\r\n\t\t\t\t\tonClick={this.handleDelete}\r\n\t\t\t\t/>\r\n\t\t\t\t{/* <HoverTextNearMouse\r\n\t\t\t\t\tshow={hoverTextEnabled && hover && !selected}\r\n\t\t\t\t\t{...restHoverTextProps}\r\n\t\t\t\t/> */}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nEachInteractiveYCoordinate.propTypes = {\r\n\tindex: PropTypes.number,\r\n\r\n\tdraggable: PropTypes.bool.isRequired,\r\n\tyValue: PropTypes.number.isRequired,\r\n\r\n\tbgFill: PropTypes.string.isRequired,\r\n\tbgOpacity: PropTypes.number.isRequired,\r\n\tstroke: PropTypes.string.isRequired,\r\n\tstrokeWidth: PropTypes.number.isRequired,\r\n\tstrokeOpacity: PropTypes.number.isRequired,\r\n\tstrokeDasharray: PropTypes.string.isRequired,\r\n\ttextFill: PropTypes.string.isRequired,\r\n\r\n\tfontWeight: PropTypes.string.isRequired,\r\n\tfontFamily: PropTypes.string.isRequired,\r\n\tfontStyle: PropTypes.string.isRequired,\r\n\tfontSize: PropTypes.number.isRequired,\r\n\r\n\ttext: PropTypes.string.isRequired,\r\n\tselected: PropTypes.bool.isRequired,\r\n\r\n\tedge: PropTypes.object.isRequired,\r\n\ttextBox: PropTypes.object.isRequired,\r\n\r\n\tonDrag: PropTypes.func.isRequired,\r\n\tonDragComplete: PropTypes.func.isRequired,\r\n\tonDelete: PropTypes.func.isRequired,\r\n};\r\n\r\nEachInteractiveYCoordinate.defaultProps = {\r\n\tonDrag: noop,\r\n\tonDragComplete: noop,\r\n\r\n\tstrokeWidth: 1,\r\n\topacity: 1,\r\n\tselected: false,\r\n\tfill: \"#FFFFFF\",\r\n\tdraggable: false,\r\n};\r\n\r\nexport default EachInteractiveYCoordinate;"]}