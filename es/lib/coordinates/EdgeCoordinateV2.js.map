{"version":3,"sources":["../../../../src/lib/coordinates/EdgeCoordinateV2.js"],"names":["React","hexToRGBA","isDefined","renderSVG","props","className","edge","helper","line","coordinateBase","coordinate","opacity","stroke","x1","y1","x2","y2","rectWidth","rectHeight","arrowWidth","path","orient","edgeXRect","edgeYRect","fill","edgeXText","edgeYText","textAnchor","fontFamily","fontSize","textFill","displayCoordinate","show","type","edgeAt","hideLine","lineStroke","lineOpacity","dx","undefined","drawOnCanvas","ctx","fillStyle","x","y","beginPath","moveTo","lineTo","closePath","rect","font","textAlign","textBaseline","fillText","strokeStyle"],"mappings":"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","file":"EdgeCoordinateV2.js","sourcesContent":["\r\n\r\nimport React from \"react\";\r\n\r\nimport { hexToRGBA, isDefined } from \"../utils\";\r\n\r\n/* eslint-disable react/prop-types */\r\nexport function renderSVG(props) {\r\n\tconst { className } = props;\r\n\r\n\tconst edge = helper(props);\r\n\tif (edge === null) return null;\r\n\tlet line, coordinateBase, coordinate;\r\n\r\n\tif (isDefined(edge.line)) {\r\n\t\tline = <line\r\n\t\t\tclassName=\"react-stockcharts-cross-hair\" opacity={edge.line.opacity} stroke={edge.line.stroke}\r\n\t\t\tx1={edge.line.x1} y1={edge.line.y1}\r\n\t\t\tx2={edge.line.x2} y2={edge.line.y2} />;\r\n\t}\r\n\tif (isDefined(edge.coordinateBase)) {\r\n\r\n\t\tconst { rectWidth, rectHeight, arrowWidth } = edge.coordinateBase;\r\n\r\n\t\tconst path = edge.orient === \"left\"\r\n\t\t\t? `M0,0L0,${ rectHeight }L${ rectWidth },${ rectHeight }L${ rectWidth + arrowWidth },10L${ rectWidth },0L0,0L0,0`\r\n\t\t\t: `M0,${ arrowWidth }L${ arrowWidth },${ rectHeight }L${ rectWidth + arrowWidth },${ rectHeight }L${ rectWidth + arrowWidth },0L${ arrowWidth },0L0,${ arrowWidth }`;\r\n\r\n\t\tcoordinateBase = edge.orient === \"left\" || edge.orient === \"right\"\r\n\t\t\t? <g transform={`translate(${edge.coordinateBase.edgeXRect},${edge.coordinateBase.edgeYRect})`}>\r\n\t\t\t\t<path d={path} key={1} className=\"react-stockchart-text-background\"\r\n\t\t\t\t\theight={rectHeight} width={rectWidth}\r\n\t\t\t\t\tfill={edge.coordinateBase.fill} opacity={edge.coordinateBase.opacity} />\r\n\t\t\t</g>\r\n\t\t\t: <rect key={1} className=\"react-stockchart-text-background\"\r\n\t\t\t\tx={edge.coordinateBase.edgeXRect}\r\n\t\t\t\ty={edge.coordinateBase.edgeYRect}\r\n\t\t\t\theight={rectHeight} width={rectWidth}\r\n\t\t\t\tfill={edge.coordinateBase.fill} opacity={edge.coordinateBase.opacity} />;\r\n\r\n\t\tcoordinate = (<text key={2} x={edge.coordinate.edgeXText}\r\n\t\t\ty={edge.coordinate.edgeYText}\r\n\t\t\ttextAnchor={edge.coordinate.textAnchor}\r\n\t\t\tfontFamily={edge.coordinate.fontFamily}\r\n\t\t\tfontSize={edge.coordinate.fontSize}\r\n\t\t\tdy=\".32em\" fill={edge.coordinate.textFill} >{edge.coordinate.displayCoordinate}</text>);\r\n\t}\r\n\treturn (\r\n\t\t<g className={className}>\r\n\t\t\t{line}\r\n\t\t\t{coordinateBase}\r\n\t\t\t{coordinate}\r\n\t\t</g>\r\n\t);\r\n}\r\n/* eslint-enable react/prop-types */\r\n\r\nfunction helper(props) {\r\n\tconst { coordinate: displayCoordinate, show, type, orient, edgeAt, hideLine } = props;\r\n\tconst { fill, opacity, fontFamily, fontSize, textFill, lineStroke, lineOpacity, arrowWidth } = props;\r\n\tconst { rectWidth, rectHeight } = props;\r\n\tconst { x1, y1, x2, y2, dx } = props;\r\n\r\n\tif (!show) return null;\r\n\r\n\t// rectWidth = rectWidth ? rectWidth : (type === \"horizontal\") ? 60 : 100;\r\n\r\n\tlet edgeXRect, edgeYRect, edgeXText, edgeYText;\r\n\r\n\tif (type === \"horizontal\") {\r\n\r\n\t\tedgeXRect = dx + ((orient === \"right\") ? edgeAt + 1 : edgeAt - rectWidth - arrowWidth - 1);\r\n\t\tedgeYRect = y1 - (rectHeight / 2);\r\n\t\tedgeXText = dx + ((orient === \"right\") ? edgeAt + (rectWidth / 2) + arrowWidth : edgeAt - (rectWidth / 2) - arrowWidth);\r\n\t\tedgeYText = y1;\r\n\t} else {\r\n\t\tedgeXRect = x1 - (rectWidth / 2);\r\n\t\tedgeYRect = (orient === \"bottom\") ? edgeAt : edgeAt - rectHeight;\r\n\t\tedgeXText = x1;\r\n\t\tedgeYText = (orient === \"bottom\") ? edgeAt + (rectHeight / 2) : edgeAt - (rectHeight / 2);\r\n\t}\r\n\tlet coordinateBase, coordinate;\r\n\tconst textAnchor = \"middle\";\r\n\tif (isDefined(displayCoordinate)) {\r\n\t\tcoordinateBase = {\r\n\t\t\tedgeXRect, edgeYRect, rectHeight, rectWidth, fill, opacity, arrowWidth\r\n\t\t};\r\n\t\tcoordinate = {\r\n\t\t\tedgeXText, edgeYText, textAnchor, fontFamily, fontSize, textFill, displayCoordinate\r\n\t\t};\r\n\t}\r\n\r\n\tconst line = hideLine ? undefined : {\r\n\t\topacity: lineOpacity, stroke: lineStroke, x1, y1, x2, y2\r\n\t};\r\n\treturn {\r\n\t\tcoordinateBase, coordinate, line, orient\r\n\t};\r\n}\r\n\r\nexport function drawOnCanvas(ctx, props) {\r\n\tconst edge = helper(props);\r\n\r\n\tif (edge === null) return;\r\n\r\n\tif (isDefined(edge.coordinateBase)) {\r\n\t\tconst { rectWidth, rectHeight, arrowWidth } = edge.coordinateBase;\r\n\r\n\t\tctx.fillStyle = hexToRGBA(edge.coordinateBase.fill, edge.coordinateBase.opacity);\r\n\r\n\t\tconst x = edge.coordinateBase.edgeXRect;\r\n\t\tconst y = edge.coordinateBase.edgeYRect;\r\n\r\n\t\tctx.beginPath();\r\n\r\n\t\tif (edge.orient === \"right\") {\r\n\t\t\tctx.moveTo(x, y + rectHeight / 2);\r\n\t\t\tctx.lineTo(x + arrowWidth, y);\r\n\t\t\tctx.lineTo(x + rectWidth + arrowWidth, y);\r\n\t\t\tctx.lineTo(x + rectWidth + arrowWidth, y + rectHeight);\r\n\t\t\tctx.lineTo(x + arrowWidth, y + rectHeight);\r\n\t\t\tctx.closePath();\r\n\t\t} else if (edge.orient === \"left\") {\r\n\t\t\tctx.moveTo(x, y);\r\n\t\t\tctx.lineTo(x + rectWidth, y);\r\n\t\t\tctx.lineTo(x + rectWidth + arrowWidth, y + rectHeight / 2);\r\n\t\t\tctx.lineTo(x + rectWidth, y + rectHeight);\r\n\t\t\tctx.lineTo(x, y + rectHeight);\r\n\t\t\tctx.closePath();\r\n\t\t} else {\r\n\t\t\tctx.rect(x, y, rectWidth, rectHeight);\r\n\t\t}\r\n\t\tctx.fill();\r\n\r\n\t\tctx.font = `${ edge.coordinate.fontSize }px ${edge.coordinate.fontFamily}`;\r\n\t\tctx.fillStyle = edge.coordinate.textFill;\r\n\t\tctx.textAlign = edge.coordinate.textAnchor === \"middle\" ? \"center\" : edge.coordinate.textAnchor;\r\n\t\tctx.textBaseline = \"middle\";\r\n\r\n\t\tctx.fillText(edge.coordinate.displayCoordinate, edge.coordinate.edgeXText, edge.coordinate.edgeYText);\r\n\t}\r\n\tif (isDefined(edge.line)) {\r\n\t\tctx.strokeStyle = hexToRGBA(edge.line.stroke, edge.line.opacity);\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(edge.line.x1, edge.line.y1);\r\n\t\tctx.lineTo(edge.line.x2, edge.line.y2);\r\n\t\tctx.stroke();\r\n\t}\r\n}\r\n\r\n// export default EdgeCoordinate;\r\n"]}