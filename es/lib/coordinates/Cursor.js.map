{"version":3,"sources":["../../../../src/lib/coordinates/Cursor.js"],"names":["React","Component","PropTypes","GenericComponent","getMouseCanvas","first","last","hexToRGBA","isDefined","isNotDefined","strokeDashTypes","getStrokeDasharray","Cursor","props","renderSVG","bind","drawOnCanvas","moreProps","mouseXY","currentItem","show","height","width","customSnapX","stroke","opacity","strokeDasharray","disableYCursor","yCursor","x1","x2","y1","y2","id","x","xCursor","xScale","plotData","xAccessor","xValue","centerX","shapeWidth","Math","abs","length","xPos","xCursorShapeFill","Function","xCursorShapeStroke","ctx","cursors","getXYCursor","useXCursorShape","context","margin","ratio","originX","left","originY","top","save","setTransform","scale","translate","forEach","dashArray","line","split","map","d","xShapeFill","getXCursorShapeFill","xCursorShapeOpacity","xCursorShapeStrokeDasharray","xShape","getXCursorShape","xShapeStroke","getXCursorShapeStroke","strokeStyle","setLineDash","beginPath","fillStyle","fillRect","rect","fill","moveTo","lineTo","restore","className","idx","rest","propTypes","string","oneOf","snapX","bool","number","oneOfType","func","isRequired","contextTypes","object","round","defaultProps"],"mappings":"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","file":"Cursor.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport GenericComponent, { getMouseCanvas } from \"../GenericComponent\";\r\n\r\nimport {\r\n\tfirst,\r\n\tlast,\r\n\thexToRGBA,\r\n\tisDefined,\r\n\tisNotDefined,\r\n\tstrokeDashTypes,\r\n\tgetStrokeDasharray\r\n} from \"../utils\";\r\n\r\nclass Cursor extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.renderSVG = this.renderSVG.bind(this);\r\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\r\n\t}\r\n\r\n\tgetXYCursor(props, moreProps) {\r\n\t\tconst { mouseXY, currentItem, show, height, width } = moreProps;\r\n\t\tconst {\r\n\t\t\tcustomSnapX,\r\n\t\t\tstroke,\r\n\t\t\topacity,\r\n\t\t\tstrokeDasharray,\r\n\t\t\tdisableYCursor\r\n\t\t} = props;\r\n\t\tif (!show || isNotDefined(currentItem)) return null;\r\n\r\n\t\tconst yCursor = {\r\n\t\t\tx1: 0,\r\n\t\t\tx2: width,\r\n\t\t\ty1: mouseXY[1],\r\n\t\t\ty2: mouseXY[1],\r\n\t\t\tstroke,\r\n\t\t\tstrokeDasharray,\r\n\t\t\topacity,\r\n\t\t\tid: \"yCursor\"\r\n\t\t};\r\n\t\tconst x = customSnapX(props, moreProps);\r\n\r\n\t\tconst xCursor = {\r\n\t\t\tx1: x,\r\n\t\t\tx2: x,\r\n\t\t\ty1: 0,\r\n\t\t\ty2: height,\r\n\t\t\tstroke,\r\n\t\t\tstrokeDasharray,\r\n\t\t\topacity,\r\n\t\t\tid: \"xCursor\"\r\n\t\t};\r\n\r\n\t\treturn disableYCursor ? [xCursor] : [yCursor, xCursor];\r\n\t}\r\n\r\n\tgetXCursorShape(moreProps/* , ctx */) {\r\n\t\tconst { height, xScale, currentItem, plotData } = moreProps;\r\n\t\tconst { xAccessor } = moreProps;\r\n\t\tconst xValue = xAccessor(currentItem);\r\n\t\tconst centerX = xScale(xValue);\r\n\t\tconst shapeWidth =\r\n\t\t\tMath.abs(\r\n\t\t\t\txScale(xAccessor(last(plotData))) -\r\n\t\t\t\t\txScale(xAccessor(first(plotData)))\r\n\t\t\t) / (plotData.length - 1);\r\n\t\tconst xPos = centerX - shapeWidth / 2;\r\n\r\n\t\treturn { height, xPos, shapeWidth };\r\n\t}\r\n\r\n\tgetXCursorShapeFill(moreProps) {\r\n\t\tconst { xCursorShapeFill } = this.props;\r\n\t\tconst { currentItem } = moreProps;\r\n\t\treturn xCursorShapeFill instanceof Function\r\n\t\t\t? xCursorShapeFill(currentItem)\r\n\t\t\t: xCursorShapeFill;\r\n\t}\r\n\r\n\tgetXCursorShapeStroke(moreProps) {\r\n\t\tconst { xCursorShapeStroke } = this.props;\r\n\t\tconst { currentItem } = moreProps;\r\n\t\treturn xCursorShapeStroke instanceof Function\r\n\t\t\t? xCursorShapeStroke(currentItem)\r\n\t\t\t: xCursorShapeStroke;\r\n\t}\r\n\r\n\tdrawOnCanvas(ctx, moreProps) {\r\n\t\tconst cursors = this.getXYCursor(this.props, moreProps);\r\n\r\n\t\tif (isDefined(cursors)) {\r\n\t\t\tconst { useXCursorShape } = this.props;\r\n\r\n\t\t\tconst { margin, ratio } = this.context;\r\n\t\t\tconst originX = 0.5 * ratio + margin.left;\r\n\t\t\tconst originY = 0.5 * ratio + margin.top;\r\n\r\n\t\t\tctx.save();\r\n\t\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\t\t\tctx.scale(ratio, ratio);\r\n\r\n\t\t\tctx.translate(originX, originY);\r\n\r\n\t\t\tcursors.forEach(line => {\r\n\t\t\t\tconst dashArray = getStrokeDasharray(line.strokeDasharray)\r\n\t\t\t\t\t.split(\",\")\r\n\t\t\t\t\t.map(d => +d);\r\n\t\t\t\tconst xShapeFill = this.getXCursorShapeFill(moreProps);\r\n\r\n\t\t\t\tif (useXCursorShape && line.id === \"xCursor\") {\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\txCursorShapeOpacity,\r\n\t\t\t\t\t\txCursorShapeStrokeDasharray\r\n\t\t\t\t\t} = this.props;\r\n\t\t\t\t\tconst xShape = this.getXCursorShape(moreProps);\r\n\r\n\t\t\t\t\tif (xCursorShapeStrokeDasharray != null) {\r\n\t\t\t\t\t\tconst xShapeStroke = this.getXCursorShapeStroke(\r\n\t\t\t\t\t\t\tmoreProps\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tctx.strokeStyle = hexToRGBA(\r\n\t\t\t\t\t\t\txShapeStroke,\r\n\t\t\t\t\t\t\txCursorShapeOpacity\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tctx.setLineDash(\r\n\t\t\t\t\t\t\tgetStrokeDasharray(xCursorShapeStrokeDasharray)\r\n\t\t\t\t\t\t\t\t.split(\",\")\r\n\t\t\t\t\t\t\t\t.map(d => +d)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.fillStyle =\r\n\t\t\t\t\t\txShapeFill != null\r\n\t\t\t\t\t\t\t? hexToRGBA(xShapeFill, xCursorShapeOpacity)\r\n\t\t\t\t\t\t\t: \"rgba(0, 0, 0, 0)\"; // =\"transparent\"\r\n\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\txCursorShapeStrokeDasharray == null\r\n\t\t\t\t\t\t? ctx.fillRect(\r\n\t\t\t\t\t\t\t  xShape.xPos,\r\n\t\t\t\t\t\t\t  0,\r\n\t\t\t\t\t\t\t  xShape.shapeWidth,\r\n\t\t\t\t\t\t\t  xShape.height\r\n\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t: ctx.rect(\r\n\t\t\t\t\t\t\t  xShape.xPos,\r\n\t\t\t\t\t\t\t  0,\r\n\t\t\t\t\t\t\t  xShape.shapeWidth,\r\n\t\t\t\t\t\t\t  xShape.height\r\n\t\t\t\t\t\t  );\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tctx.strokeStyle = hexToRGBA(line.stroke, line.opacity);\r\n\t\t\t\t\tctx.setLineDash(dashArray);\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.moveTo(line.x1, line.y1);\r\n\t\t\t\t\tctx.lineTo(line.x2, line.y2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctx.stroke();\r\n\t\t\t});\r\n\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\r\n\trenderSVG(moreProps) {\r\n\t\tconst cursors = this.getXYCursor(this.props, moreProps);\r\n\t\tif (isNotDefined(cursors)) return null;\r\n\r\n\t\tconst { className, useXCursorShape } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<g className={`react-stockcharts-crosshair ${className}`}>\r\n\t\t\t\t{cursors.map(({ strokeDasharray, id, ...rest }, idx) => {\r\n\t\t\t\t\tif (useXCursorShape && id === \"xCursor\") {\r\n\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\txCursorShapeOpacity,\r\n\t\t\t\t\t\t\txCursorShapeStrokeDasharray\r\n\t\t\t\t\t\t} = this.props;\r\n\t\t\t\t\t\tconst xShape = this.getXCursorShape(moreProps);\r\n\t\t\t\t\t\tconst xShapeFill = this.getXCursorShapeFill(moreProps);\r\n\t\t\t\t\t\tconst xShapeStroke = this.getXCursorShapeStroke(\r\n\t\t\t\t\t\t\tmoreProps\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<rect\r\n\t\t\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\t\t\tx={xShape.xPos}\r\n\t\t\t\t\t\t\t\ty={0}\r\n\t\t\t\t\t\t\t\twidth={xShape.shapeWidth}\r\n\t\t\t\t\t\t\t\theight={xShape.height}\r\n\t\t\t\t\t\t\t\tfill={\r\n\t\t\t\t\t\t\t\t\txShapeFill != null\r\n\t\t\t\t\t\t\t\t\t\t? xShapeFill\r\n\t\t\t\t\t\t\t\t\t\t: \"none\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tstroke={\r\n\t\t\t\t\t\t\t\t\txCursorShapeStrokeDasharray == null\r\n\t\t\t\t\t\t\t\t\t\t? null\r\n\t\t\t\t\t\t\t\t\t\t: xShapeStroke\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tstrokeDasharray={\r\n\t\t\t\t\t\t\t\t\txCursorShapeStrokeDasharray == null\r\n\t\t\t\t\t\t\t\t\t\t? null\r\n\t\t\t\t\t\t\t\t\t\t: getStrokeDasharray(\r\n\t\t\t\t\t\t\t\t\t\t\t  xCursorShapeStrokeDasharray\r\n\t\t\t\t\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\topacity={xCursorShapeOpacity}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<line\r\n\t\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\t\tstrokeDasharray={getStrokeDasharray(\r\n\t\t\t\t\t\t\t\tstrokeDasharray\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<GenericComponent\r\n\t\t\t\tsvgDraw={this.renderSVG}\r\n\t\t\t\tclip={false}\r\n\t\t\t\tcanvasDraw={this.drawOnCanvas}\r\n\t\t\t\tcanvasToDraw={getMouseCanvas}\r\n\t\t\t\tdrawOn={[\"mousemove\", \"pan\", \"drag\"]}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nCursor.propTypes = {\r\n\tclassName: PropTypes.string,\r\n\tstroke: PropTypes.string,\r\n\tstrokeDasharray: PropTypes.oneOf(strokeDashTypes),\r\n\tsnapX: PropTypes.bool,\r\n\topacity: PropTypes.number,\r\n\tdisableYCursor: PropTypes.bool,\r\n\tuseXCursorShape: PropTypes.bool,\r\n\txCursorShapeFill: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\r\n\txCursorShapeStroke: PropTypes.oneOfType([PropTypes.string, PropTypes.func])\r\n\t\t.isRequired,\r\n\txCursorShapeStrokeDasharray: PropTypes.oneOf(strokeDashTypes),\r\n\txCursorShapeOpacity: PropTypes.number\r\n};\r\n\r\nCursor.contextTypes = {\r\n\tmargin: PropTypes.object.isRequired,\r\n\tratio: PropTypes.number.isRequired\r\n\t// xScale for getting update event upon pan end, this is needed to get past the PureComponent shouldComponentUpdate\r\n\t// xScale: PropTypes.func.isRequired,\r\n};\r\n\r\nfunction customSnapX(props, moreProps) {\r\n\tconst { xScale, xAccessor, currentItem, mouseXY } = moreProps;\r\n\tconst { snapX } = props;\r\n\tconst x = snapX ? Math.round(xScale(xAccessor(currentItem))) : mouseXY[0];\r\n\treturn x;\r\n}\r\n\r\nCursor.defaultProps = {\r\n\tstroke: \"#000000\",\r\n\topacity: 0.3,\r\n\tstrokeDasharray: \"ShortDash\",\r\n\tsnapX: true, // snaps the crosshair to the nearest xValue\r\n\tcustomSnapX,\r\n\tdisableYCursor: false,\r\n\tuseXCursorShape: false,\r\n\txCursorShapeStroke: \"#000000\",\r\n\txCursorShapeOpacity: 0.5\r\n};\r\n\r\nexport default Cursor;\r\n"]}